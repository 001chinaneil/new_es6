"use strict";function flush(e){var s=e.length;if(0!==s){for(var t=e.splice(0,s),a=[],n=0;n<s;n++)a=a.concat(t[n].resolve());a=getUnfetchedUris(a);var u=Module.get(data.cwd+"_flush_"+data.cid(),a);u.load=load,u._entry.push(u),u.history={},u.remain=1,u.callback=function(){for(var e=0;e<s;e++)t[e].onload();delete u.callback,delete u.history,delete u.remain,delete u._entry},u.load()}}function needLoadImmediately(e){return hasEmptyDependencies(e)||isSavedBeforeRequest(e)||isAsync(e)}function isSavedBeforeRequest(e){return!isLoadOnRequest&&e.status===Module.STATUS.SAVED}function hasEmptyDependencies(e){return 0===e.dependencies.length}function isAsync(e){return ASYNC_RE.test(e.uri)}function getUnfetchedUris(e){for(var s,t=[],a={},n=0,u=e.length;n<u;n++)(s=e[n])&&!a[s]&&(a[s]=!0,(!seajs.cache[s]||seajs.cache[s].status<Module.STATUS.SAVED)&&t.push(s));return t}var Module=seajs.Module,load=Module.prototype.load,data=seajs.data,useStack=data.flushUseStack=[],depStack=data.flushDepStack=[],isLoadOnRequest=!1,isInUse=!1;Module.prototype.load=function(){var e=this;needLoadImmediately(e)?load.call(e):isInUse?useStack.push(e):depStack.push(e)},seajs.use=function(e,s){return isInUse=!0,Module.use(e,s,data.cwd+"_use_"+data.cid()),isInUse=!1,seajs},seajs.flush=function(){flush(useStack)},seajs.on("request",function(e){var s=e.onRequest;e.onRequest=function(){isLoadOnRequest=!0,s(),isLoadOnRequest=!1,flush(depStack)}});var ASYNC_RE=/\.js_async_\d+$/;