"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function n(s,a,l){function u(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,n,s,a,l)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,i){var r,o;r=this,o=function(){var c,i,e,t,r,p,o,n,s,a,l,u,d=d||(c=Math,i=Object.create||function(){function i(){}return function(e){var t;return i.prototype=e,t=new i,i.prototype=null,t}}(),t=(e={}).lib={},r=t.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},p=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||n).stringify(this)},concat:function(e){var t=this.words,i=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var n=0;n<o;n++){var s=i[n>>>2]>>>24-n%4*8&255;t[r+n>>>2]|=s<<24-(r+n)%4*8}else for(n=0;n<o;n+=4)t[r+n>>>2]=i[n>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],r=function(t){t=t;var i=987654321,r=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(.5<c.random()?1:-1)}},o=0;o<e;o+=4){var n=r(4294967296*(t||c.random()));t=987654071*n(),i.push(4294967296*n()|0)}return new p.init(i,e)}}),o=e.enc={},n=o.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],o=0;o<i;o++){var n=t[o>>>2]>>>24-o%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new p.init(i,t/2)}},s=o.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],o=0;o<i;o++){var n=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new p.init(i,t)}},a=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=a.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,r=t.sigBytes,o=this.blockSize,n=r/(4*o),s=(n=e?c.ceil(n):c.max((0|n)-this._minBufferSize,0))*o,a=c.min(4*s,r);if(s){for(var l=0;l<s;l+=o)this._doProcessBlock(i,l);var u=i.splice(0,s);t.sigBytes-=a}return new p.init(u,a)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new u.HMAC.init(i,t).finalize(e)}}}),u=e.algo={},e);return d},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o():"function"==typeof define&&define.amd?define([],o):r.CryptoJS=o()},{}],2:[function(e,t,i){var r,o;r=this,o=function(e){return l=(t=e).lib.WordArray,t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,r=this._map;e.clamp();for(var o=[],n=0;n<i;n+=3)for(var s=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,a=0;a<4&&n+.75*a<i;a++)o.push(r.charAt(s>>>6*(3-a)&63));var l=r.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,i=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<i.length;o++)r[i.charCodeAt(o)]=o}var n=i.charAt(64);if(n){var s=e.indexOf(n);-1!==s&&(t=s)}return function(e,t,i){for(var r=[],o=0,n=0;n<t;n++)if(n%4){var s=i[e.charCodeAt(n-1)]<<n%4*2,a=i[e.charCodeAt(n)]>>>6-n%4*2;r[o>>>2]|=(s|a)<<24-o%4*8,o++}return l.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64;var t,l},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(r.CryptoJS)},{"./core":1}],3:[function(e,t,i){var r,o;r=this,o=function(e){return e.enc.Utf8},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(r.CryptoJS)},{"./core":1}],4:[function(e,t,i){var r,o;r=this,o=function(e){return e.HmacSHA1},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],o):o(r.CryptoJS)},{"./core":1,"./hmac":5,"./sha1":6}],5:[function(e,t,i){var r,o;r=this,o=function(e){var t,i,u;i=(t=e).lib.Base,u=t.enc.Utf8,t.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=u.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),n=this._iKey=t.clone(),s=o.words,a=n.words,l=0;l<i;l++)s[l]^=1549556828,a[l]^=909522486;o.sigBytes=n.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(r.CryptoJS)},{"./core":1}],6:[function(e,t,i){var r,o;r=this,o=function(e){return i=(t=e).lib,r=i.WordArray,o=i.Hasher,n=t.algo,p=[],s=n.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],o=i[1],n=i[2],s=i[3],a=i[4],l=0;l<80;l++){if(l<16)p[l]=0|e[t+l];else{var u=p[l-3]^p[l-8]^p[l-14]^p[l-16];p[l]=u<<1|u>>>31}var c=(r<<5|r>>>27)+a+p[l];c+=l<20?1518500249+(o&n|~o&s):l<40?1859775393+(o^n^s):l<60?(o&n|o&s|n&s)-1894007588:(o^n^s)-899497514,a=s,s=n,n=o<<30|o>>>2,o=r,r=c}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+n|0,i[3]=i[3]+s|0,i[4]=i[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=o._createHelper(s),t.HmacSHA1=o._createHmacHelper(s),e.SHA1;var t,i,r,o,n,p,s},"object"==(void 0===i?"undefined":_typeof(i))?t.exports=i=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(r.CryptoJS)},{"./core":1}],7:[function(e,t,i){var r=e("../ui/component"),o=(e("../lib/util"),e("../lib/dom")),n=e("../lib/event"),s=(e("../lib/ua"),e("../lang/index")),a=e("../player/base/event/eventtype"),l=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+s.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+s.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var r=this;r._player.on(a.Private.AutoStreamShow,function(e){var t=document.querySelector("#"+r.getId()+" .tip-text");if(r._player._getLowerQualityLevel){var i=r._player._getLowerQualityLevel();i&&(r._switchUrl=i,t.innerText=s.get("Auto_Stream_Tip_Text").replace("$$",i.item.desc),o.css(r.el(),"display","block"))}}),r._player.on(a.Private.AutoStreamHide,function(e){document.querySelector("#"+r.getId()+" .tip-text"),o.css(r.el(),"display","none")});var e=document.querySelector("#"+r.getId()+" .prism-button-ok");n.on(e,"click",function(){r._player._changeStream&&r._switchUrl&&r._player._changeStream(r._switchUrl.index,s.get("Quality_Change_Text")),o.css(r.el(),"display","none")});var t=document.querySelector("#"+r.getId()+" .prism-button-cancel");n.on(t,"click",function(){o.css(r.el(),"display","none")})}});t.exports=l},{"../lang/index":16,"../lib/dom":22,"../lib/event":23,"../lib/ua":31,"../lib/util":33,"../player/base/event/eventtype":38,"../ui/component":80}],8:[function(e,t,i){var r=e("../ui/component"),n=e("../lib/dom"),o=e("../lib/event"),s=e("../lib/ua"),a=e("../lib/function"),l=(e("../lang/index"),e("../lib/util"),e("../lib/playerutil")),u=e("../player/base/event/eventtype"),c=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=r.prototype.createEl.call(this);return e.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',e},bindEvent:function(){var i=this;this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),o.on(this.cursorNode,"mousedown",function(e){i._onMouseDown(e)}),o.on(this.cursorNode,"touchstart",function(e){i._onMouseDown(e)}),o.on(this.progressNode,"mousemove",function(e){i._progressMove(e)}),o.on(this.progressNode,"touchmove",function(e){i._progressMove(e)}),o.on(this._el,"click",function(e){i._onMouseClick(e)}),this._player.on(u.Private.HideProgress,function(e){i._hideProgress(e)}),this._player.on(u.Private.CancelHideProgress,function(e){i._cancelHideProgress(e)}),o.on(this.progressNode,u.Private.MouseOver,function(e){i._onMouseOver(e)}),o.on(this.progressNode,u.Private.MouseOut,function(e){i._onMouseOut(e)}),this.bindTimeupdate=a.bind(this,this._onTimeupdate),this._player.on(u.Player.TimeUpdate,this.bindTimeupdate),l.isLiveShift(this._player._options)&&this._player.on(u.Player.Play,function(){i._liveshiftService.start(6e4,function(e){var t={mediaId:i._player._options.vid?i._player._options.vid:"",error_code:e.Code,error_msg:e.Message};i._player.logError(t),i._player.trigger(u.Player.Error,t)})}),this._player.on(u.Private.LiveShiftQueryCompleted,function(){i._updateSeperator()}),this._player.on(u.Player.Pause,function(){i._liveshiftService.stop()}),s.IS_IPAD?this.interval=setInterval(function(){i._onProgress()},500):this._player.on(u.Video.Progress,function(){i._onProgress()})},_updateSeperator:function(){var e=this._liveshiftService.availableLiveShiftTime/this._liveshiftService.liveTimeRange.totalTime;e=1<e?1:e,n.css(this.progressNode,"width",100*e+"%")},_progressMove:function(e){},_hideProgress:function(e){o.off(this.cursorNode,"mousedown"),o.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;o.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),o.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return"function"==typeof this._player.canSeekable&&(t=this._player.canSeekable(e)),t},_onMouseOver:function(e){this._updateCursorPosition(this._player.getCurrentTime());var t=this;setTimeout(function(){n.css(t.cursorNode,"display","block")}),n.css(this.timeNode,"display","block")},_onMouseOut:function(e){n.css(this.cursorNode,"display","none"),n.css(this.timeNode,"display","none")},_getSeconds:function(e){for(var t=this.el().offsetLeft,i=this.el();i=i.offsetParent;)t+=i.offsetLeft;var r=(e.touches?e.touches[0].pageX:e.pageX)-t,o=this.progressNode.offsetWidth,n=this._liveshiftService.availableLiveShiftTime;return sec=n?r/o*n:0,sec<0&&(sec=0),sec>n&&(sec=n),sec},_onMouseClick:function(e){var t=this._getSeconds(e);this._player.trigger(u.Private.SeekStart,{fromTime:this._player.getCurrentTime()});var i=this._liveshiftService.getSourceUrl(t);this._player.loadByUrl(i,t,!0),this._player.trigger(u.Private.Play_Btn_Hide),this._liveshiftService.seekTime=t,this._player.trigger(u.Private.EndStart,{toTime:t}),this._updateCursorPosition(t)},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(u.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),o.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),o.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),o.on(this._player.tag,"mouseup",function(e){t._onMouseUp(e)}),o.on(this._player.tag,"touchend",function(e){t._onMouseUp(e)}),o.on(this.controlNode,"mouseup",function(e){t._onMouseUp(e)}),o.on(this.controlNode,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),o.off(this.controlNode,"mousemove"),o.off(this.controlNode,"touchmove"),o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.controlNode,"mouseup"),o.off(this.controlNode,"touchend");var t=this._liveshiftService.availableLiveShiftTime,i=this.playedNode.offsetWidth/this.el().offsetWidth*t,r=this._liveshiftService.getSourceUrl(i);this._player.loadByUrl(r,i,!0),this._player.trigger(u.Private.Play_Btn_Hide),this._liveshiftService.seekTime=i,this._player.trigger(u.Private.EndStart,{toTime:i})},_onMouseMove:function(e){e.preventDefault();var t=this._getSeconds(e);this._updateProgressBar(this.playedNode,t),this._updateCursorPosition(t)},_onTimeupdate:function(e){this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(u.Private.UpdateProgressBar,{time:this._player.getCurrentTime()})},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){if(1!=this._player._switchSourcing){var i=0;if(-1==this._liveshiftService.seekTime)i=1;else{var r=this._liveshiftService.availableLiveShiftTime;t+=this._liveshiftService.seekTime,1<(i=r?t/r:0)&&(i=1,this._liveshiftService.seekTime=-1)}this.liveShiftStartDisplay,e&&n.css(e,"width",100*i+"%")}},_updateCursorPosition:function(e){if(1!=this._player._switchSourcing){var t=0;if(-1==this._liveshiftService.seekTime)t=1;else{var i=this._liveshiftService.availableLiveShiftTime;e+=this._liveshiftService.seekTime,1<(t=i?e/i:0)&&(this._liveshiftService.seekTime=-1)}var r=1,o=this._player.el().clientWidth;0!=o&&(r=1-18/o),this.cursorNode&&(r<t?(n.css(this.cursorNode,"right","0px"),n.css(this.cursorNode,"left","auto")):(n.css(this.cursorNode,"right","auto"),n.css(this.cursorNode,"left",100*t+"%")))}}});t.exports=c},{"../lang/index":16,"../lib/dom":22,"../lib/event":23,"../lib/function":24,"../lib/playerutil":29,"../lib/ua":31,"../lib/util":33,"../player/base/event/eventtype":38,"../ui/component":80}],9:[function(e,t,i){var r=e("../ui/component"),n=e("../lib/util"),s=e("../player/base/event/eventtype"),o=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-live-time-display",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',e},bindEvent:function(){var o=this;this._player.on(s.Video.TimeUpdate,function(){var e=o._liveshiftService,t=document.querySelector("#"+o.id()+" .current-time");if(e.liveShiftStartDisplay&&e.availableLiveShiftTime>e.seekTime&&-1!=e.seekTime){var i=o._liveshiftService.getBaseTime(),r=n.formatTime(i+o._player.getCurrentTime());t.innerText=r}else e.currentTimeDisplay&&(t.innerText=e.currentTimeDisplay)}),this._player.on(s.Private.LiveShiftQueryCompleted,function(){o.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});t.exports=o},{"../lib/util":33,"../player/base/event/eventtype":38,"../ui/component":80}],10:[function(e,t,i){t.exports={domain:"g.alicdn.com",flashVersion:"2.6.0",h5Version:"2.6.0",logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track"}},{}],11:[function(e,t,i){e("./lang/index").load();var r=e("./player/adaptivePlayer"),o=function(e,t){return r.create(e,t)};e("./lib/componentutil").register(o);var n=window.Aliplayer=o;o.players={},"function"==typeof define&&define.amd?define([],function(){return n}):"object"==(void 0===i?"undefined":_typeof(i))&&"object"==(void 0===t?"undefined":_typeof(t))&&(t.exports=n)},{"./lang/index":16,"./lib/componentutil":18,"./player/adaptivePlayer":35}],12:[function(e,t,i){var r=e("../lib/oo"),o=e("../lang/index"),n=r.extend({init:function(e,t){this._player=e,this._options=e.options()}});n.prototype.handle=function(e){if(this._options.autoPlayDelay){var t=this._options.autoPlayDelayDisplayText;t||(t=o.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay)),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide");var i=this;this._timeHandler=setTimeout(function(){i._player.trigger("info_hide"),i._options.autoPlayDelay=0,e&&e()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){s(i)}),this._player.on("pause",function(){s(i)})}};var s=function(e){e._timeHandler&&(clearTimeout(e._timeHandler),e._timeHandler=null)};t.exports=n},{"../lang/index":16,"../lib/oo":28}],13:[function(e,t,i){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",Speed_Text:"Speed",Speed_1X_Text:"1X",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Snapshot:"Snapshot",Detection_Text:"Diagnosis",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_Server_Network_NotSupport_Text:"Network error or  the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format of video is not supported by h5 player，please use flash player",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4 is not supported by this explorer",Error_Not_Support_encrypt_Text:"The encrypted video is not supported by h5 player,please set useFlashPrism to true",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls，please close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed",Error_Load_M3U8_Timeout_Text:"Timeout error occored when the m3u8 file loaded",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Waiting_Timeout_Text:"Buffering timeout, please close or refresh",Error_Invalidate_Source:"Invalid source",Error_Fetch_NotStream:"The vid has no stream to play",Error_Not_Found:"Url is not found",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"please make sure enable cors,<a href='https://help.aliyun.com/document_detail/62950.html?spm=a2c4g.11186623.2.21.Y3n2oi' target='_blank'>refer to document</a>",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv、rmtp can't be supported on mobile，please use m3u8",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM"}},{}],14:[function(e,t,i){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles and Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error, please try to refresh",Decode_Error:"Data decoding error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading, please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted, please try to refresh",Corss_Domain_Error:"Please ensure your domain has obtained IPC license and combined CNAME, \r\n or to set  cross-domain accessing available",Url_Timeout_Error:"The video url is timeout, please try to refresh",Connetction_Error:"Sorry，the video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player，please use h5 player"}},{}],15:[function(e,t,i){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",Forbidden_Text:"内部信息，严禁外传",Refresh:"刷新",Diagnosis:"诊断",Live_Finished:"直播已结束,谢谢观看",Play:"播放",Pause:"暂停",Snapshot:"截图",Replay:"重播",Live:"直播",Encrypt:"加密",Sound:"声音",Fullscreen:"全屏",Exist_Fullscreen:"退出全屏",Resolution:"清晰度",Next:"下一集",Brightness:"亮度",Default:"默认",Contrast:"对比度",Titles_Credits:"片头片尾",Skip_Titles:"跳过片头",Skip_Credits:"跳过片尾",Not_Support_Out_Site:"该视频暂不支持站外播放，请到淘TV观看",Watch_Now:"立即观看",Network_Error:"网络无法连接，请尝试检查网络后刷新试试",Video_Error:"视频播放异常，请刷新试试",Decode_Error:"播放数据解码错误",Live_Not_Start:"亲，直播还未开始哦，敬请期待",Live_Loading:"直播信息加载中，请刷新试试",Live_End:"亲，直播已结束",Live_Abrot:"当前直播信号中断，请刷新后重试",Corss_Domain_Error:"请确认您的域名已完成备案和CNAME绑定，\r\n并处于启用状态，或资源允许跨越访问",Url_Timeout_Error:"您所观看的视频地址连接超时，请刷新后重试",Connetction_Error:"抱歉,该视频由于连接错误暂时不能播放,请观看其它视频",Fetch_MTS_Error:"获取视频列表失败，请确认",Token_Expired_Error:"请求接口失败，请确认Token是否过期",Video_Lists_Empty_Error:"获取视频列表为空，请确认播放数据与格式",Encrypted_Failed_Error:"获取视频加密秘钥错误，请确认播放权限",Fetch_Failed_Permission_Error:"获取视频列表失败，请确认播放权限",Invalidate_Param_Error:"无输入视频，请确认输入参数",AutoPlayDelayDisplayText:"$$秒以后开始播放",Fetch_MTS_NOT_NotStream_Error:"此vid没有可播放视频",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Cant_Use_Flash_On_Mobile:"移动端不支持Flash播放器，请使用h5播放器"}},{}],16:[function(n,e,t){var i=n("../config"),s=n("../lib/storage"),r=(n("../lib/io"),"aliplayer_lang_data"),o="aliplayer_lang",a=function(){if(void 0===window[o]||!window[o]){var e=(navigator.language||navigator.browserLanguage).toLowerCase();e=e&&-1<e.indexOf("zh")?"zh-cn":"en-us",window[o]=e}return window[o]},l=function(e){var t=p(e),i=s.get(t);if(i)u(e,JSON.parse(i));else{var r,o=c();r=n("flash"==e?"en-us"==o?"./flash/en-us":"./flash/zh-cn":"en-us"==o?"./en-us":"./zh-cn"),s.set(t,JSON.stringify(r)),u(e,r)}},u=function(e,t){var i=p(e);window[i]=t},c=function(){var e=a();return"en-us"!=e&&"zh-cn"!=e&&(e="en-us"),e},p=function(e){var t=c();return e||(e="h5"),r+"_"+e+"_"+i.h5Version.replace(/\./g,"_")+"_"+t};e.exports.setCurrentLanguage=function(e,t){var i=window[o];if(void 0!==e&&e||(e=a()),"en-us"!=e&&"zh-cn"!=e)throw new Error('please set language property to be "en-us" or "zh-cn"');window[o]=e,l(t),e!=i&&n("../lib/constants").updateByLanguage()},e.exports.getCurrentLanguage=a,e.exports.getLanguageData=function(e,t){var i=p(e);return window[i]},e.exports.load=l,e.exports.get=function(e,t){t||(t="h5");var i=p(t),r=window[i];if(r)return r[e]}},{"../config":10,"../lib/constants":19,"../lib/io":25,"../lib/storage":30,"./en-us":13,"./flash/en-us":14,"./flash/zh-cn":15,"./zh-cn":17}],17:[function(e,t,i){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",Speed_Text:"倍速",Speed_1X_Text:"1X",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"不能播放，切换为",Quality_Change_Text:"正在为您切换到 ",Quality_The_Url:"此地址",Refresh_Text:"刷新",Detection_Text:"诊断",Cancel:"取消",Mute:"静音",Snapshot:"截图",Play_DateTime:"播放时间",AutoPlayDelayDisplayText:"$$秒以后开始播放",Error_Load_Abort_Text:"获取数据过程被中止",Error_Network_Text:"网络错误加载数据失败",Error_Decode_Text:"解码错误",Error_Server_Network_NotSupport_Text:"服务器、网络错误或格式不支持",Error_Offline_Text:"网络不可用，请确定",Error_Play_Text:"播放出错啦",Error_Retry_Text:"请尝试退出重试或刷新",Error_AuthKey_Text:"可能鉴权过期、域名不在白名单或请求被拦截",Error_H5_Not_Support_Text:"h5不支持此格式，请使用flash播放器",Error_Not_Support_M3U8_Text:"浏览器不支持m3u8视频播放",Error_Not_Support_MP4_Text:"浏览器不支持mp4视频播放",Error_Not_Support_encrypt_Text:"h5不支持加密视频的播放，请设置useFlashPrism为true",Error_Vod_URL_Is_Empty_Text:"获取播放地址为空",Error_Vod_Fetch_Urls_Text:"获取地址出错啦，请尝试退出重试或刷新",Fetch_Playauth_Error:"获取播放凭证出错啦，请尝试退出重试或刷新",Error_Playauth_Decode_Text:"playauth解析错误",Error_Vid_Not_Same_Text:"不能更新地址，vid和播放中的不一致",Error_Playauth_Expired_Text:"凭证已过期，请尝试退出重试或刷新",Error_MTS_Fetch_Urls_Text:"MTS获取取数失败",Error_Load_M3U8_Failed_Text:"获取m3u8文件失败",Error_Load_M3U8_Timeout_Text:"获取m3u8文件超时",Error_M3U8_Decode_Text:"获取m3u8文件解析失败",Error_TX_Decode_Text:"解析数据出错",Error_Waiting_Timeout_Text:"缓冲数据超时，请尝试退出重试或刷新",Error_Invalidate_Source:"无效地址",Error_Fetch_NotStream:"此vid没有可播放视频",Error_Not_Found:"播放地址不存在",Live_End:"亲，直播已结束",Play_Before_Fullscreen:"播放后再全屏",Can_Not_Seekable:"不能seek到这里",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$",Request_Block_Text:"浏览器安全策略视频地址不能为http协议，与网站https协议不一致",Open_Html_By_File:"不能直接在浏览器打开html文件，请部署到服务端",Maybe_Cors_Error:"请确认是否开启了允许跨域访问<a href='https://help.aliyun.com/document_detail/62950.html?spm=a2c4g.11186623.2.21.Y3n2oi' target='_blank'>参考文档</a>",Speed_Switch_To:"倍速切换到 ",Curent_Volume:"当前音量：",Volume_Mute:"设置为静音",Volume_UnMute:"设置为非静音",ShiftLiveTime_Error:"直播开始时间不能大于直播结束时间",Error_Not_Support_Format_On_Mobile:"移动端不支持flv、rmtp视频，请使用m3u8",SessionId_Ticket_Invalid:"DRM视频播放，sessionId和ticket属性不能为空",Http_Error:"Http网络请求失败",Http_Timeout:"http请求超时",DRM_License_Expired:"DRM license超时，请刷新",Not_Support_DRM:"浏览器不支持DRM视频的播放"}},{}],18:[function(e,t,i){var r=e("./oo"),o=e("../player/base/event/eventtype");t.exports.stopPropagation=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()},t.exports.register=function(e){e.util={stopPropagation:t.exports.stopPropagation},e.Component=r.extend,e.EventType=o.Player}},{"../player/base/event/eventtype":38,"./oo":28}],19:[function(e,t,i){var r=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,CrossDomain:4027,OtherError:4400,ServerAPIError:4500},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"};var o=function(){t.exports.VideoErrorCodeText={1:r.get("Error_Load_Abort_Text"),2:r.get("Error_Network_Text"),3:r.get("Error_Decode_Text"),4:r.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:r.get("OD"),640:r.get("FD"),960:r.get("LD"),1280:r.get("SD"),1920:r.get("HD"),2580:r.get("2K"),3840:r.get("4K")},t.exports.QualityLevels={OD:r.get("OD"),LD:r.get("LD"),FD:r.get("FD"),SD:r.get("SD"),HD:r.get("HD"),"2K":r.get("2K"),"4K":r.get("4K"),XLD:r.get("XLD"),FHD:r.get("FHD")},t.exports.SpeedLevels=[{key:1,text:r.get("Speed_1X_Text")},{key:1.25,text:r.get("Speed_125X_Text")},{key:1.5,text:r.get("Speed_15X_Text")},{key:2,text:r.get("Speed_2X_Text")}]};o(),t.exports.updateByLanguage=o},{"../lang/index":16}],20:[function(e,t,i){t.exports.get=function(e){for(var t=e+"",i=document.cookie.split(";"),r=0;r<i.length;r++){var o=i[r].trim();if(0==o.indexOf(t))return unescape(o.substring(t.length+1,o.length))}return""},t.exports.set=function(e,t,i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3);var o="expires="+r.toGMTString();document.cookie=e+"="+escape(t)+"; "+o}},{}],21:[function(e,i,t){var r=e("./object");i.exports.cache={},i.exports.guid=function(e,t){var i,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||o.length,e)for(i=0;i<e;i++)n[i]=o[0|Math.random()*t];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",i=0;i<36;i++)n[i]||(r=0|16*Math.random(),n[i]=o[19==i?3&r|8:r]);return n.join("")},i.exports.expando="vdata"+(new Date).getTime(),i.exports.getData=function(e){var t=e[i.exports.expando];return t||(t=e[i.exports.expando]=i.exports.guid(),i.exports.cache[t]={}),i.exports.cache[t]},i.exports.hasData=function(e){var t=e[i.exports.expando];return!(!t||r.isEmpty(i.exports.cache[t]))},i.exports.removeData=function(e){var t=e[i.exports.expando];if(t){delete i.exports.cache[t];try{delete e[i.exports.expando]}catch(t){e.removeAttribute?e.removeAttribute(i.exports.expando):e[i.exports.expando]=null}}}},{"./object":27}],22:[function(e,t,i){var r=e("./object");t.exports.el=function(e){return document.getElementById(e)},t.exports.createEl=function(e,t){var i;return e=e||"div",t=t||{},i=document.createElement(e),r.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?i.setAttribute(e,t):i[e]=t}),i},t.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},t.exports.removeClass=function(e,t){var i,r;if(-1!=e.className.indexOf(t)){for(r=(i=e.className.split(" ")).length-1;0<=r;r--)i[r]===t&&i.splice(r,1);e.className=i.join(" ")}},t.exports.getElementAttributes=function(e){var t,i,r,o;if(t={},",autoplay,controls,loop,muted,default,",e&&e.attributes&&0<e.attributes.length)for(var n=(i=e.attributes).length-1;0<=n;n--)r=i[n].name,o=i[n].value,"boolean"!=typeof e[r]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+r+",")||(o=null!==o),t[r]=o;return t},t.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(i,e,t){return!(!i||!i.style)&&(e&&t?(i.style[e]=t,!0):t||"string"!=typeof e?!t&&"object"==(void 0===e?"undefined":_typeof(e))&&(r.each(e,function(e,t){i.style[e]=t}),!0):i.style[e])},t.exports.getTransformName=function(e){var t,i,r=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=r[0];for(t=0,i=r.length;t<i;t++)if(void 0!==e.style[r[t]]){o=r[t];break}return o}},{"./object":27}],23:[function(e,l,t){function u(t,i,e,r){c.each(e,function(e){t(i,e,r)})}var c=e("./object"),p=e("./data");l.exports.on=function(n,e,t){if(c.isArray(e))return u(l.exports.on,n,e,t);var s=p.getData(n);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),t.guid||(t.guid=p.guid()),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e){if(!s.disabled){e=l.exports.fixEvent(e);var t=s.handlers[e.type];if(t)for(var i=t.slice(0),r=0,o=i.length;r<o&&!e.isImmediatePropagationStopped();r++)i[r].call(n,e)}}),1==s.handlers[e].length&&(n.addEventListener?n.addEventListener(e,s.dispatcher,!1):n.attachEvent&&n.attachEvent("on"+e,s.dispatcher))},l.exports.off=function(t,e,i){if(p.hasData(t)){var r=p.getData(t);if(r.handlers){if(c.isArray(e))return u(l.exports.off,t,e,i);var o=function(e){r.handlers[e]=[],l.exports.cleanUpEvents(t,e)};if(e){var n=r.handlers[e];if(n){if(!i)return void o(e);if(i.guid)for(var s=0;s<n.length;s++)n[s].guid===i.guid&&n.splice(s--,1);l.exports.cleanUpEvents(t,e)}}else for(var a in r.handlers)o(a)}}},l.exports.cleanUpEvents=function(e,t){var i=p.getData(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),c.isEmpty(i.handlers)&&(delete i.handlers,delete i.dispatcher,delete i.disabled),c.isEmpty(i)&&p.removeData(e)},l.exports.fixEvent=function(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var r=e||window.event;for(var o in e={},r)"layerX"!==o&&"layerY"!==o&&"keyboardEvent.keyLocation"!==o&&("returnValue"==o&&r.preventDefault||(e[o]=r[o]));if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=i,e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!=e.clientX){var n=document.documentElement,s=document.body;e.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},l.exports.trigger=function(e,t){var i=p.hasData(e)?p.getData(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t){var o=null;(e.paramData||0==e.paramData)&&(o=e.paramData,e.paramData=null,e.removeAttribute(o)),t={type:t,target:e,paramData:o}}if(t=l.exports.fixEvent(t),i.dispatcher&&i.dispatcher.call(e,t),r&&!t.isPropagationStopped()&&!1!==t.bubbles)l.exports.trigger(r,t);else if(!r&&!t.defaultPrevented){var n=p.getData(t.target);t.target[t.type]&&(n.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),n.disabled=!1)}return!t.defaultPrevented},l.exports.one=function(t,i,r){if(c.isArray(i))return u(l.exports.one,t,i,r);var e=function e(){l.exports.off(t,i,e),r.apply(this,arguments)};e.guid=r.guid=r.guid||p.guid(),l.exports.on(t,i,e)}},{"./data":21,"./object":27}],24:[function(e,t,i){var o=e("./data");t.exports.bind=function(e,t,i){t.guid||(t.guid=o.guid());var r=function(){return t.apply(e,arguments)};return r.guid=i?i+"_"+t.guid:t.guid,r}},{"./data":21}],25:[function(e,a,t){var h=e("./url");a.exports.get=function(e,t,i,r,o){a.exports.ajax("GET",e,"",t,i,r,o)},a.exports.post=function(e,t,i,r,o,n){var s={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};a.exports.ajax("POST",e,t,i,r,o,n,s)},a.exports.ajax=function(e,t,i,r,o,n,s,a){var l,u,c,p;o=o||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),u=new XMLHttpRequest,c=h.parseUrl(t),p=window.location,!(c.protocol+c.host!==p.protocol+p.host)||!window.XDomainRequest||"withCredentials"in u?(l="file:"==c.protocol||"file:"==p.protocol,u.onreadystatechange=function(){4===u.readyState&&(200===u.status||l&&0===u.status?r(u.responseText):o(u.responseText))}):((u=new window.XDomainRequest).onload=function(){r(u.responseText)},u.onerror=o,u.onprogress=function(){},u.ontimeout=o);try{if(void 0===n&&(n=!0),u.open(e,t,n),s&&(u.withCredentials=!0),a)for(var d in a)u.setRequestHeader(d,a[d])}catch(e){return void o(e)}try{u.send(i)}catch(e){o(e)}},a.exports.jsonp=function(e,t,i){var r="jsonp_callback_"+Math.round(1e5*Math.random()),o=document.createElement("script");e&&(o.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+r+"&cb="+r,o.onerror=function(){delete window[r],document.body.removeChild(o),i()},o.onload=function(){setTimeout(function(){window[r]&&(delete window[r],document.body.removeChild(o))},0)},window[r]=function(e){delete window[r],document.body.removeChild(o),t(e)},document.body.appendChild(o))},a.exports.loadJS=function(e,t){var i=document.getElementsByTagName("HEAD").item(0),r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=function(){t&&t()},i.appendChild(r)}},{"./url":32}],26:[function(e,t,i){var n=e("./dom");t.exports.render=function(e,t){var i=t.align?t.align:"tl",r=t.x?t.x:0,o=t.y?t.y:0;xunit=r.indexOf&&0<r.indexOf("%")?"":"px",yunit=o.indexOf&&0<o.indexOf("%")?"":"px","tl"===i?n.css(e,{float:"left","margin-left":r+xunit,"margin-top":o+yunit}):"tr"===i?n.css(e,{float:"right","margin-right":r+xunit,"margin-top":o+yunit}):"tlabs"===i?n.css(e,{position:"absolute",left:r+xunit,top:o+yunit}):"trabs"===i?n.css(e,{position:"absolute",right:r+xunit,top:o+yunit}):"blabs"===i?n.css(e,{position:"absolute",left:r+xunit,bottom:o+yunit}):"brabs"===i?n.css(e,{position:"absolute",right:r+xunit,bottom:o+yunit}):"cc"===i&&n.css(e,{position:"absolute",left:"50%",top:"50%","margin-top":e.offsetHeight/-2+"px","margin-left":e.offsetWidth/-2+"px"})}},{"./dom":22}],27:[function(e,s,t){var a=Object.prototype.hasOwnProperty;s.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},s.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},s.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},s.exports.each=function(e,t,i){if(s.exports.isArray(e))for(var r=0,o=e.length;r<o&&!1!==t.call(i||this,e[r],r);++r);else for(var n in e)if(a.call(e,n)&&!1===t.call(i||this,n,e[n]))break;return e},s.exports.merge=function(e,t){if(!t)return e;for(var i in t)a.call(t,i)&&(e[i]=t[i]);return e},s.exports.deepMerge=function(e,t){var i,r,o;for(i in e=s.exports.copy(e),t)a.call(t,i)&&(r=e[i],o=t[i],s.exports.isPlain(r)&&s.exports.isPlain(o)?e[i]=s.exports.deepMerge(r,o):e[i]=t[i]);return e},s.exports.copy=function(e){return s.exports.merge({},e)},s.exports.isPlain=function(e){return!!e&&"object"==(void 0===e?"undefined":_typeof(e))&&"[object Object]"===e.toString()&&e.constructor===Object},s.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e})}},{}],28:[function(e,t,i){var o=e("./object"),n=function(){};(n=function(){}).extend=function(e){var t,i;for(var r in t=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){},(((i=function(){t.apply(this,arguments)}).prototype=o.create(this.prototype)).constructor=i).extend=n.extend,i.create=n.create,e)e.hasOwnProperty(r)&&(i.prototype[r]=e[r]);return i},n.create=function(){var e=o.create(this.prototype);return this.apply(e,arguments),e},t.exports=n},{"./object":27}],29:[function(e,f,t){var y=e("./object"),i=e("../config"),r=e("./dom"),o=e("./cookie"),n=e("./constants"),s=e("./ua"),_=e("../player/base/plugin/defaultemptycomponent"),v={preload:!1,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,format:"mp4",loadDataTimeout:20,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"h5",x5_fullscreen:!1,x5_orientation:"portraint",autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,language:"zh-cn",mediaType:"video",components:[],liveTimeShiftUrl:"",videoHeight:"100%",videoWidth:"100%",snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,skinRes:"//"+i.domain+"/de/prismplayer-flash/"+i.flashVersion+"/atlas/defaultSkin"};f.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:10},{name:"volume",align:"tr",x:10,y:10},{name:"streamButton",align:"tr",x:0,y:10},{name:"speedButton",align:"tr",x:0,y:10}]}],f.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"volume",align:"tr",x:10,y:10},{name:"streamButton",align:"tr",x:0,y:10}]}],f.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")},f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e&&s.browser.version.indexOf("11.")<0)},f.exports.hasUIComponent=function(e,t){if(void 0===e||!e||0==e.length)return!1;for(var i=0,r=e.length;i<r;i++){var o=e[i].name;if(o==t)return!0;if("controlBar"==o)return f.exports.hasUIComponent(e[i].children,t)}return!1},f.exports.validateSource=function(e){return!e||!!new RegExp(".m3u8|.mp4|.mp3|.flv|rtmp","i").test(e)},f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},f.exports.createWrapper=function(e){var t,i=e.id;if("string"==typeof i?(0===i.indexOf("#")&&(i=i.slice(1)),t=r.el(i)):t=i,!t||!t.nodeName)throw new TypeError("没有为播放器指定容器");return f.exports.adjustContainerLayout(t,e),t},f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},f.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return i&&r},f.exports.isSupportFlv=function(){return f.exports.isSupportHls()},f.exports.isSupportMSE=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&f.exports.isSupportedMediaSource()},f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},f.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE()},f.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")},f.exports.isLiveShift=function(e){return e.isLive&&e.liveTimeShiftUrl},f.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},f.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},f.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},f.exports.findSelectedStreamLevel=function(e){var t=o.get(n.SelectedStreamLevel);if(!t)return o.set(n.SelectedStreamLevel,e[0].definition,365),0;for(var i=0;i<e.length;i++)if(e[i].definition==t)return i;return 0},f.exports.handleOption=function(e,t){var i=y.merge(y.copy(v),e),r=[{name:"fullScreenButton",align:"tr",x:20,y:10},{name:"volume",align:"tr",x:20,y:10}],o=!1;if(e.useFlashPrism||f.exports.isRTMP(e.source))o=!0,r=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}];else{var n=f.exports.isLiveShift(i);n?(r.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),r.push({name:"playButton",align:"tl",x:15,y:12}),r.push({name:"liveShiftTimeDisplay",align:"tl",x:10,y:7})):r.push({name:"liveDisplay",align:"tlabs",x:15,y:16})}if(e.isLive)if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay",align:"cc"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:r}];else if(0!=e.skinLayout){for(var s=e.skinLayout.length,a=[],l=-1,u=0;u<s;u++)if("controlBar"==i.skinLayout[u].name){l=u;for(var c=i.skinLayout[u].children.length,p=0;p<c;p++){var d=i.skinLayout[u].children[p].name;if("liveDisplay"==d||"liveIco"==d||"fullScreenButton"==d||"volume"==d||"snapshot"==d||n&&("progress"==d||"playButton"==d||"timeDisplay"==d)){var h=i.skinLayout[u].children[p];"progress"==d?h.name="liveShiftProgress":"timeDisplay"==d?h.name="liveShiftTimeDisplay":o&&"liveDisplay"==d&&(h.name="liveIco"),a.push(h)}}break}-1!=l&&(i.skinLayout[l].children=a)}return(void 0===e.components||!e.components||y.isArray(e.components)&&0==e.components.length)&&(i.components=[_]),i}},{"../config":10,"../player/base/plugin/defaultemptycomponent":58,"./constants":19,"./cookie":20,"./dom":22,"./object":27,"./ua":31}],30:[function(e,t,i){t.exports.set=function(t,i){try{window.localStorage&&localStorage.setItem(t,i)}catch(e){window[t+"_localStorage"]=i}},t.exports.get=function(t){try{if(window.localStorage)return localStorage.getItem(t)}catch(e){return window[t+"_localStorage"]}return""}},{}],31:[function(e,L,t){if(L.exports.USER_AGENT=navigator.userAgent,L.exports.IS_IPHONE=/iPhone/i.test(L.exports.USER_AGENT),L.exports.IS_IPAD=/iPad/i.test(L.exports.USER_AGENT),L.exports.IS_IPOD=/iPod/i.test(L.exports.USER_AGENT),L.exports.IS_MAC=/mac/i.test(L.exports.USER_AGENT),L.exports.IS_EDGE=/Edge/i.test(L.exports.USER_AGENT),L.exports.IS_IE11=/Trident\/7.0/i.test(L.exports.USER_AGENT),L.exports.IS_CHROME=/Chrome/i.test(L.exports.USER_AGENT)&&!L.exports.IS_EDGE,L.exports.IS_SAFARI=/Safari/i.test(L.exports.USER_AGENT)&&!L.exports.IS_CHROME,L.exports.IS_FIREFOX=/Firefox/i.test(L.exports.USER_AGENT),document.all)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");L.exports.HAS_FLASH=!!i}catch(e){L.exports.HAS_FLASH=!1}else if(navigator.plugins&&0<navigator.plugins.length){i=navigator.plugins["Shockwave Flash"];L.exports.HAS_FLASH=!!i}else L.exports.HAS_FLASH=!1;var r,o,n,s;L.exports.IS_MAC_SAFARI=L.exports.IS_MAC&&L.exports.IS_SAFARI&&!L.exports.IS_CHROME&&!L.exports.HAS_FLASH,L.exports.IS_IOS=L.exports.IS_IPHONE||L.exports.IS_IPAD||L.exports.IS_IPOD,L.exports.IOS_VERSION=function(){var e=L.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),L.exports.IS_ANDROID=/Android/i.test(L.exports.USER_AGENT),L.exports.ANDROID_VERSION=(s=L.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(o=s[1]&&parseFloat(s[1]),n=s[2]&&parseFloat(s[2]),o&&n?parseFloat(s[1]+"."+s[2]):o||null):null,L.exports.IS_OLD_ANDROID=L.exports.IS_ANDROID&&/webkit/i.test(L.exports.USER_AGENT)&&L.exports.ANDROID_VERSION<2.3,L.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),L.exports.IS_MOBILE=L.exports.IS_IOS||L.exports.IS_ANDROID,L.exports.IS_H5=L.exports.IS_MOBILE||!L.exports.HAS_FLASH,L.exports.IS_PC=!L.exports.IS_H5,L.exports.is_X5=/micromessenger/i.test(L.exports.USER_AGENT)||/qqbrowser/i.test(L.exports.USER_AGENT),L.exports.getHost=function(e){var t="";if(void 0===e||null==e||""==e)return"";var i=e.indexOf("//"),r=e;-1<i&&(r=e.substring(i+2));t=r;var o=r.split("/");return o&&0<o.length&&(t=o[0]),(o=t.split(":"))&&0<o.length&&(t=o[0]),t},L.exports.dingTalk=function(){return/dingtalk/i.test(L.exports.USER_AGENT.toLowerCase())},L.exports.wechat=function(){return/micromessenger/i.test(L.exports.USER_AGENT.toLowerCase())},L.exports.inIFrame=function(){return self!=top},L.exports.getReferer=function(){return L.exports.inIFrame()?top.document.referrer:document.referrer},L.exports.getHref=function(){return L.exports.inIFrame()?top.location.href:location.href},r=L.exports,function(e,t){var i,r,o,n,s=this.os={},a=this.browser={},l=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),u=e.match(/(Android);?[\s\/]+([\d.]+)?/),c=!!e.match(/\(Macintosh\; Intel /),p=e.match(/(iPad).*OS\s([\d_]+)/),d=e.match(/(iPod)(.*OS\s([\d_]+))?/),h=!p&&e.match(/(iPhone\sOS)\s([\d_]+)/),f=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),y=/Win\d{2}|Windows/.test(t),_=e.match(/Windows Phone ([\d.]+)/),v=f&&e.match(/TouchPad/),m=e.match(/Kindle\/([\d.]+)/),g=e.match(/Silk\/([\d._]+)/),S=e.match(/(BlackBerry).*Version\/([\d.]+)/),x=e.match(/(BB10).*Version\/([\d.]+)/),b=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),T=e.match(/PlayBook/),E=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),P=e.match(/Firefox\/([\d.]+)/),w=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),C=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),I=!E&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),k=I||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if((a.webkit=!!l)&&(a.version=l[1]),u&&(s.android=!0,s.version=u[2]),h&&!d&&(s.ios=s.iphone=!0,s.version=h[2].replace(/_/g,".")),p&&(s.ios=s.ipad=!0,s.version=p[2].replace(/_/g,".")),d&&(s.ios=s.ipod=!0,s.version=d[3]?d[3].replace(/_/g,"."):null),_&&(s.wp=!0,s.version=_[1]),f&&(s.webos=!0,s.version=f[2]),v&&(s.touchpad=!0),S&&(s.blackberry=!0,s.version=S[2]),x&&(s.bb10=!0,s.version=x[2]),b&&(s.rimtabletos=!0,s.version=b[2]),T&&(a.playbook=!0),m&&(s.kindle=!0,s.version=m[1]),g&&(a.silk=!0,a.version=g[1]),!g&&s.android&&e.match(/Kindle Fire/)&&(a.silk=!0),E&&(a.chrome=!0,a.version=E[1]),P&&(a.firefox=!0,a.version=P[1]),w&&(s.firefoxos=!0,s.version=w[1]),C&&(a.ie=!0,a.version=C[1]),k&&(c||s.ios||y||u)&&(a.safari=!0,s.ios||(a.version=k[1])),I&&(a.webview=!0),c){var D=e.match(/[\d]*_[\d]*_[\d]*/);D&&0<D.length&&D[0]&&(s.version=D[0].replace(/_/g,"."))}s.tablet=!!(p||T||u&&!e.match(/Mobile/)||P&&e.match(/Tablet/)||C&&!e.match(/Phone/)&&e.match(/Touch/)),s.phone=!(s.tablet||s.ipod||!(u||h||f||S||x||E&&e.match(/Android/)||E&&e.match(/CriOS\/([\d.]+)/)||P&&e.match(/Mobile/)||C&&e.match(/Touch/))),s.pc=!s.tablet&&!s.phone,c?s.name="macOS":y?(s.name="windows",s.version=(o=navigator.userAgent,n="",(-1<o.indexOf("Windows NT 5.0")||-1<o.indexOf("Windows 2000"))&&(n="2000"),(-1<o.indexOf("Windows NT 5.1")||-1<o.indexOf("Windows XP"))&&(n="XP"),(-1<o.indexOf("Windows NT 5.2")||-1<o.indexOf("Windows 2003"))&&(n="2003"),(-1<o.indexOf("Windows NT 6.0")||-1<o.indexOf("Windows Vista"))&&(n="Vista"),(-1<o.indexOf("Windows NT 6.1")||-1<o.indexOf("Windows 7"))&&(n="7"),(-1<o.indexOf("Windows NT 6.2")||-1<o.indexOf("Windows 8"))&&(n="8"),(-1<o.indexOf("Windows NT 6.3")||-1<o.indexOf("Windows 8.1"))&&(n="8.1"),(-1<o.indexOf("Windows NT 10")||-1<o.indexOf("Windows 10"))&&(n="10"),n)):s.name=function(){var e=navigator.userAgent,t="other",i=L.exports.os;if(i.ios)return"iOS";if(i.android)return"android";if(-1<e.indexOf("Baiduspider"))return"Baiduspider";if(-1<e.indexOf("PlayStation"))return"PS4";var r="Win32"==navigator.platform||"Windows"==navigator.platform||-1<e.indexOf("Windows"),o="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return o&&(t="macOS"),"X11"==navigator.platform&&!r&&!o&&(t="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(t="Linux"),r?"windows":t}(),a.name=(i=navigator.userAgent.toLowerCase(),(r=L.exports.browser).firefox?"Firefox":r.webview?"webview":r.ie?/edge/.test(i)?"Edge":"IE":r.chrome?"Chrome":r.safari?"Safari":/baiduspider/.test(i)?"Baiduspider":/ucweb/.test(i)||/UCBrowser/.test(i)?"UC":/opera/.test(i)?"Opera":/ucweb/.test(i)?"UC":/360se/.test(i)?"360浏览器":/bidubrowser/.test(i)?"百度浏览器":/metasr/.test(i)?"搜狗浏览器":/lbbrowser/.test(i)?"猎豹浏览器":/micromessenger/.test(i)?"微信内置浏览器":/qqbrowser/.test(i)?"QQ浏览器":/playstation/.test(i)?"PS4浏览器":void 0)}.call(r,navigator.userAgent,navigator.platform)},{}],32:[function(e,t,i){var a=e("./dom");t.exports.getAbsoluteURL=function(e){return e.match(/^https?:\/\//)||(e=a.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href),e},t.exports.parseUrl=function(e){var t,i,r,o,n;o=["protocol","hostname","port","pathname","search","hash","host"],(r=""===(i=a.createEl("a",{href:e})).host&&"file:"!==i.protocol)&&((t=a.createEl("div")).innerHTML='<a href="'+e+'"></a>',i=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t)),n={};for(var s=0;s<o.length;s++)n[o[s]]=i[o[s]];return r&&document.body.removeChild(t),n}},{"./dom":22}],33:[function(e,t,i){var r=e("./dom"),o=e("./ua"),n=e("./playerutil");t.exports.formatTime=function(e){var t,i,r,o=Math.round(e);return t=Math.floor(o/3600),o%=3600,i=Math.floor(o/60),r=o%60,!(t===1/0||isNaN(t)||i===1/0||isNaN(i)||r===1/0||isNaN(r))&&("00"===(t=10<=t?t:"0"+t)?"":t+":")+(i=10<=i?i:"0"+i)+":"+(r=10<=r?r:"0"+r)},t.exports.extractTime=function(e){if(e){var t=parseInt(e.getHours()),i=parseInt(e.getMinutes()),r=parseInt(e.getSeconds());return("00"===(t=10<=t?t:"0"+t)?"":t+":")+(i=10<=i?i:"0"+i)+":"+(r=10<=r?r:"0"+r)}return""},t.exports.convertToTimestamp=function(e,t){var i="";return e&&(t?i=e.gettime():(i=Date.parse(e),i/=1e3)),i},t.exports.convertToDate=function(e,t){var i="";return e&&(i=new Date).setTime(1e3*e),i},t.exports.parseTime=function(e){var t=e.split(":"),i=0,r=0,o=0;return 3===t.length?(i=t[0],r=t[1],o=t[2]):2===t.length?(r=t[0],o=t[1]):1===t.length&&(o=t[0]),3600*(i=parseInt(i,10))+60*(r=parseInt(r,10))+(o=Math.ceil(parseFloat(o)))},t.exports.formatDate=function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},t.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);},t.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),i=t.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=t.charCodeAt(o);return r},t.exports.readyBinary=function(e){for(var t=new Uint8Array(e),i=t.length,r="",o=0;o<i;o++)r+=t[o];return r},t.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),e.delayHanlder=setTimeout(function(){r.css(e,"display","none")},t))},t.exports.openInFile=function(){return-1!=window.location.protocol.toLowerCase().indexOf("file")},t.exports.contentProtocolMixed=function(e){return!!(o.os.pc&&(n.isHls(e)&&!o.browser.safari||n.isFlv(e))&&"https:"==window.location.protocol.toLowerCase()&&e&&-1<e.toLowerCase().indexOf("http://"))},t.exports.queryString=function(e){var t,i,r,o,n;return 2!==(i=(e=decodeURIComponent(e)).split("?")).length?{}:(n=i[1],(t=n.split("&"))?(r={},o=0,$(t).each(function(){var e;2===(e=t[o].split("=")).length&&(r[e[0]]=e[1].replace(/\+/g," ")),o++}),r):{})}},{"./dom":22,"./playerutil":29,"./ua":31}],34:[function(e,t,i){var r,o=e("../lib/oo"),c=e("../lib/object"),n=e("../lib/cookie"),b=e("../lib/data"),T=e("../lib/io"),E=e("../lib/ua"),P=e("../config"),s=e("../player/base/event/eventtype"),a=0,p={INIT:1001,CLOSE:1002,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,STARTPLAY:1005,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,LOADSTART:2015,LOADEDMETADATA:2016,LOADEDDATA:2017,CANPLAY:2018,CANPLAYTHROUGH:2019,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,UNDERLOAD:3002,LOADED:3001,HEARTBEAT:9001,ERROR:4001},l=o.extend({init:function(e,t,i){void 0===i&&(i=!0),this.trackLog=i,this.player=e,this.requestId="",this.sessionId=b.guid(),this.playId=0,this.firstPlay=!0,this.osName=E.os.name,this.osVersion=E.os.version||"",this.exName=E.browser.name,this.exVersion=E.browser.version||"";var r=this.player.getOptions(),o=t.from?t.from:"",n=(r.isLive,"player"),s=r.isLive?"live":"vod",a="pc";E.IS_IPAD?a="pad":E.os.phone&&(a="phone");var l=encodeURIComponent(E.getReferer()),u=E.getHref(),c=encodeURIComponent(u),p="";u&&(p=E.getHost(u));var d=P.h5Version,h=this._getUuid(),f=r.source?encodeURIComponent(r.source):"",y=E.getHost(r.source),_=this.sessionId,v="0.0.0.0",m="0.0.0.0",g=(new Date).getTime();this._userNetInfo={cdnIp:"",localIp:""};var S=this;try{var x=function(e){S._log("FETCHEDIP",{error:e||"获取IP出错"})};!function(t){if(this.trackLog)T.jsonp("https://cdn.dns-detect.alicdn.com/api/cdnDetectHttps?method=createDetectHttps",function(e){return T.jsonp(e.content,t,x)},x)}(function(e){v=S._userNetInfo.cdnIp=e.content.ldns,m=S._userNetInfo.localIp=e.content.localIp,S._log("FETCHEDIP",{cdn_ip:v,local_ip:m})})}catch(e){console.log(e)}this.opt={APIVersion:"0.6.0",t:g,ll:"info",lv:"1.0",pd:n,md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:E.USER_AGENT,hn:"0.0.0.0",bi:o,ri:_,e:"0",args:"0",vt:s,tt:a,dm:"h5",av:d,uuid:h,vu:f,vd:y,ua:"0",dn:"custom",cdn_ip:v,app_n:p,r:l,pu:c},this.bindEvent()},updateVideoInfo:function(e){var t=e.from?e.from:"";this.opt.bi=t,this.updateSourceInfo()},updateSourceInfo:function(){var e=this.player.getOptions();if(e){var t=e.source?encodeURIComponent(e.source):"",i=E.getHost(e.source);this.opt.vu=t,this.opt.vd=i}},bindEvent:function(){var t=this;this.player.on(s.Player.Init,function(){t._onPlayerInit()}),window.addEventListener("beforeunload",function(){t._onPlayerClose()}),this.player.on(s.Video.LoadStart,function(){t.loadstartTime=(new Date).getTime(),t._onPlayerloadstart()}),this.player.on(s.Video.LoadedMetadata,function(){t._onPlayerLoadMetadata()}),this.player.on(s.Video.LoadedData,function(){t._onPlayerLoaddata()}),this.player.on(s.Video.Play,function(){t._onPlayerPlay()}),this.player.on(s.Player.Ready,function(){t._onPlayerReady()}),this.player.on(s.Video.Ended,function(){t._onPlayerFinish()}),this.player.on(s.Video.Pause,function(){t._onPlayerPause()}),this.player.on(s.Private.SeekStart,function(e){t._onPlayerSeekStart(e)}),this.player.on(s.Private.EndStart,function(e){t._onPlayerSeekEnd(e)}),this.player.on(s.Player.Waiting,function(){t._onPlayerLoaded()}),this.player.on(s.Video.CanPlayThrough,function(){t._onPlayerUnderload()}),this.player.on(s.Video.CanPlay,function(){t._onPlayerCanplay()}),this.player.on(s.Player.Error,function(){t._onPlayerError()}),this.player.on(s.Player.RequestFullScreen,function(){t._onFullscreenChange(1)}),this.player.on(s.Player.CancelFullScreen,function(){t._onFullscreenChange(0)}),r=setInterval(function(){2===t.player.readyState()||3===t.player.readyState()?t._onPlayerLoaded():4===t.player.readyState()&&t._onPlayerUnderload()},100),setInterval(function(){if(t.player.getCurrentTime()){var e=Math.floor(1e3*t.player.getCurrentTime());t.player.paused()||30<=++a&&(t._log("HEARTBEAT",{vt:e,interval:1e3*a}),a=0)}},1e3)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("error"),this.player.off("fullscreenchange"),clearInterval(r)},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onPlayerloadstart:function(){this.playId=b.guid(),this._log("LOADSTART",{pt:(new Date).getTime()})},_onPlayerLoadMetadata:function(){this._log("LOADEDMETADATA",{cost:(new Date).getTime()-this.loadstartTime})},_onPlayerLoaddata:function(){this._LoadedData=!0,this._log("LOADEDDATA",{cost:(new Date).getTime()-this.loadstartTime}),this._reportPlay()},_onPlayerCanplay:function(){this._log("CANPLAY",{pt:(new Date).getTime()-this.loadstartTime})},_onPlayerInit:function(){this._log("INIT",{}),this.buffer_flag=0,this.pause_flag=0},_onPlayerClose:function(){this._log("CLOSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})},_onPlayerReady:function(){this.startTimePlay=(new Date).getTime()},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.sessionId=b.guid(),this.playId=0},_reportPlay:function(){return!(this.buffer_flag||!this.player._options.autoplay||!this._LoadedData||(this.first_play_time=(new Date).getTime(),this._log("PLAY",{dsm:"fix",vt:0,start_cost:this.first_play_time-this.player.getReadyTime()}),this.buffer_flag=1,0))},_onPlayerPlay:function(){this._log("STARTPLAY",{}),0==this.playId&&(this.playId=b.guid()),this.firstPlay||0!=this.pause_flag||this.seeking||(this.sessionId=b.guid()),this.firstPlay=!1,this._reportPlay()||this.buffer_flag&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime}))},_onPlayerPause:function(){this.buffer_flag&&this.startTimePlay&&(this.seeking||(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})))},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.seeking=!0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(e){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*e.paramData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this.seeking=!1},_onPlayerLoaded:function(){this.buffer_flag&&this.startTimePlay&&(this.stucking||this.seeking||(this.stuckStartTime=(new Date).getTime(),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){if(!this.buffer_flag&&!this.player._options.autoplay)return this.first_play_time=(new Date).getTime(),this._log("PLAY",{play_mode:"fix",vt:0,start_cost:this.first_play_time-this.player.getReadyTime()}),void(this.buffer_flag=1);if((this.buffer_flag||!this.player._options.autoplay)&&this.stucking&&!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),i=Math.floor((new Date).getTime()-t);i<0&&(i=0),this._log("LOADED",{vt:e,cost:i}),this.stucking=!1}},_onPlayerHeartBeat:function(){if(!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this;this.timer||(this.timer=setTimeout(function(){!t.seeking&&t._log("HEARTBEAT",{progress:e}),clearTimeout(t.timer),t.timer=null},6e4)),console.log("timeupdate")}},_onPlayerError:function(){this.playId=0},_log:function(e,t){if(this.trackLog){this.updateSourceInfo();var i=c.copy(this.opt);if(this.requestId=b.guid(),"ERROR"==e&&"FETCHEDIP"!=e&&"CDNDETECT"!=e){var r=this;T.jsonp("https://cdn.dns-detect.alicdn.com/api/cdnDetectHttps?method=createDetectHttps",function(e){r._log("CDNDETECT",{flag:0,error:"",eri:r.requestId})},function(e){r._log("CDNDETECT",{flag:1,error:e||"访问CDN错误",eri:r.requestId})})}var o=P.logReportTo;i.e=p[e],i.ri=this.sessionId,i.t=(new Date).getTime(),i.cdn_ip=this._userNetInfo.cdnIp,i.hn=this._userNetInfo.localIp;var n=this.player.getCurrentQuality();""!=n&&(i.definition=n.definition);var s=[];c.each(t,function(e,t){s.push(e+"="+t)});var a="",l=this.player.getOptions();l&&l.vid&&(a=l.vid),s.push("vid="+a);try{Aliplayer&&Aliplayer.__logCallback__&&(i.args=s,Aliplayer.__logCallback__(i))}catch(e){console.log(e)}""==(s=s.join("&"))&&(s="0"),i.args=encodeURIComponent(s);var u=[];return c.each(i,function(e,t){u.push(e+"="+t)}),u=u.join("&"),T.jsonp(o+"?"+u,function(){},function(){}),this.sessionId}},_getUuid:function(){var e=n.get("p_h5_u");return e||(e=b.guid(),n.set("p_h5_u",e,730)),e}});t.exports=l},{"../config":10,"../lib/cookie":20,"../lib/data":21,"../lib/io":25,"../lib/object":27,"../lib/oo":28,"../lib/ua":31,"../player/base/event/eventtype":38}],35:[function(e,t,i){var a=e("./base/player"),l=e("./flash/flashplayer"),u=e("./saas/mtsplayer"),c=e("./saas/vodplayer"),p=e("./taotv/taotvplayer"),d=e("./audio/audioplayer"),h=e("./hls/hlsplayer"),f=e("./flv/flvplayer"),y=e("../lib/ua"),_=e("../lib/playerutil"),v=(e("../lib/dom"),e("../lang/index"));t.exports.create=function(e,t){"function"!=typeof t&&(t=function(){}),e.readyCallback=t,v.setCurrentLanguage(e.language);var i=_.handleOption(e),r=i.source,o=_.isAudio(r);o&&(i.height="auto",i.mediaType="audio");var n,s=_.createWrapper(i);return s.player?s.player:(o?n=new d(s,i):!i.useFlashPrism&&_.isFlv(r)&&_.isSupportFlv()?n=new f(s,i):y.IS_MOBILE||!i.useFlashPrism&&!_.isRTMP(r)?i.vid&&!i.source?n=i.authInfo?new u(s,i):i.playauth||i.accessKeyId&&i.securityToken&&i.accessKeySecret?new c(s,i):new p(s,i):y.os.pc&&_.isHls(r)?_.canPlayHls()?n=_.isSafariUsedHlsPlugin(i.useHlsPluginForSafari)?new h(s,i):new a(s,i):_.isSupportHls()?n=new h(s,i):i.userH5Prism||i.useH5Prism||(n=new l(s,i)):n=new a(s,i):n=new l(s,i),n)}},{"../lang/index":16,"../lib/dom":22,"../lib/playerutil":29,"../lib/ua":31,"./audio/audioplayer":36,"./base/player":57,"./flash/flashplayer":63,"./flv/flvplayer":65,"./hls/hlsplayer":67,"./saas/mtsplayer":70,"./saas/vodplayer":76,"./taotv/taotvplayer":79}],36:[function(e,t,i){var r=e("../base/player"),o=e("../../ui/component"),n=e("../../lib/dom"),s=e("../../lib/object"),a=e("../../lib/playerutil"),l=r.extend({init:function(e,t){this._isAudio=!0,void 0===t.skinLayout&&(t.skinLayout=a.defaultAudioLayout),r.call(this,e,t)}});l.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&(this._el=this.tag,this.tag=o.prototype.createEl.call(this,"audio"));var t=this._el,e=this.tag;e.player=this;var i=n.getElementAttributes(e);return s.each(i,function(e){t.setAttribute(e,i[e])}),this.setVideoAttrs(),e.parentNode&&e.parentNode.insertBefore(t,e),n.insertFirst(e,t),t},t.exports=l},{"../../lib/dom":22,"../../lib/object":27,"../../lib/playerutil":29,"../../ui/component":80,"../base/player":57}],37:[function(e,t,i){var s=e("../../../lib/event"),a=e("./eventtype"),r=e("../eventHandler/video/index"),o=e("../eventHandler/player/index");t.exports.offAll=function(e){var t=e.tag,i=e._el;for(var r in a.Video)s.off(t,a.Video[r]);for(var o in a.Player)s.off(i,a.Player[o]);for(var n in a.Private)s.off(i,a.Private[n])},t.exports.onAll=function(e){r.bind(e),o.bind(e)}},{"../../../lib/event":23,"../eventHandler/player/index":42,"../eventHandler/video/index":51,"./eventtype":38}],38:[function(e,t,i){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",StartSeek:"startSeek",CompleteSeek:"completeSeek"},Private:{Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryComplete:"liveShiftQueryCompleted",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide"}}},{}],39:[function(e,t,i){var r=(e("../../event/eventtype"),e("../../../../lib/dom"));t.exports.handle=function(){r.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":22,"../../event/eventtype":38}],40:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){this.play(),this._seeking=!1,this.trigger(r.Player.CompleteSeek,e.paramData.toTime)}},{"../../event/eventtype":38}],41:[function(e,t,i){var r=e("../../event/eventtype");e("../../../../lib/constants"),e("../../../../lang/index"),t.exports.handle=function(e){var t=this,i=e.paramData;t.trigger(r.Private.H5_Loading_Hide),t.trigger(r.Private.Cover_Hide),t.trigger(r.Private.Play_Btn_Hide),i=i||{},t._monitor&&(i.uuid=t._monitor._getUuid(),i.requestId=t._serverRequestId,i.cdnIp=t._monitor._userNetInfo.cdnIp,i.localIp=t._monitor._userNetInfo.localIp),t._isError=!0,t.trigger(r.Private.Error_Show,i),t.trigger(r.Private.LifeCycleChanged,{type:r.Player.Error,data:i})}},{"../../../../lang/index":16,"../../../../lib/constants":19,"../../event/eventtype":38}],42:[function(e,t,i){var r=e("../../event/eventtype"),o=e("../../../../lib/event"),n=e("./lifecyclecommon"),s={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error")},a=[r.Private.EndStart,r.Private.SeekStart,r.Player.RequestFullScreen,r.Player.CancelFullScreen,r.Player.Error,r.Player.Ready,r.Private.Dispose,r.Private.Created],l=function(t,i,r){var e=t.el();o.on(e,i,function(e){(r&&r.handle?r.handle:n.handle).call(t,e,i)})};t.exports.bind=function(e){for(var t=(e.el(),0);t<a.length;t++){var i=a[t];"undefined"!=s[i]&&l(e,i,s[i])}}},{"../../../../lib/event":23,"../../event/eventtype":38,"./cancelfullscreen":39,"./endstart":40,"./error":41,"./lifecyclecommon":43,"./requestfullscreen":44,"./seekstart":45}],43:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(r.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":38}],44:[function(e,t,i){var r=(e("../../event/eventtype"),e("../../../../lib/dom"));t.exports.handle=function(){r.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":22,"../../event/eventtype":38}],45:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){this._seeking=!0,this.trigger(r.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":38}],46:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t._retrySwitchUrlCount=0,t._liveRetryCount=0,t._clearLiveErrorHandle();var i=(new Date).getTime()-t.readyTime;t.trigger(r.Player.CanPlay,{loadtime:i})}},{"../../event/eventtype":38}],47:[function(e,t,i){var r=e("../../event/eventtype"),o=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(e){this.trigger(r.Private.Cover_Hide);var t=this.tag;"none"===t.style.display&&n.IS_IOS&&setTimeout(function(){o.css(t,"display","block")},100),this.trigger(r.Video.CanPlayThrough)}},{"../../../../lib/dom":22,"../../../../lib/ua":31,"../../event/eventtype":38}],48:[function(e,t,i){t.exports.handle=function(e,t){var i="";e&&e.paramData&&(i=e.paramData),this.trigger(t,i)}},{}],49:[function(e,t,i){var r=e("../../event/eventtype"),o=e("../../../../lang/index");t.exports.handle=function(e){var t=this;t.waiting=!1,t._options.rePlay?(t.seek(0),t.tag.play()):t._options.isLive&&(t.trigger(r.Private.H5_Loading_Hide),t.trigger(r.Private.Info_Show,o.get("Live_End"))),t.trigger(r.Player.Ended)}},{"../../../../lang/index":16,"../../event/eventtype":38}],50:[function(e,t,i){var u=e("../../event/eventtype"),c=(e("../../../../lib/ua"),e("../../../../lib/playerutil"),e("../../../../lib/constants")),p=e("../../../../lang/index");t.exports.handle=function(e){var t=this;if(t.waiting=!1,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.checkOnline()){var i,r="",o=e.target||e.srcElement,n=o.error.message;r="";if(o.error.code&&(i=o.error.code,r=c.VideoErrorCode[o.error.code],n=i+" || "+n),t._options.isLive)t._options.liveRetry>t._liveRetryCount?t._reloadAndPlayForM3u8():(t._liveRetryCount=0,t.trigger(u.Player.LiveStreamStop),t._liveErrorHandle=setTimeout(function(){var e={mediaId:"ISLIVE",error_code:r,error_msg:p.get("Error_Play_Text")+"，"+p.get("Error_Retry_Text")};t.logError(e),t.trigger("error",e)},500));else{var s=p.get("Error_Play_Text"),a=!1;i<4?s=c.VideoErrorCodeText[i]:t._eventState==c.SUSPEND?(s=p.get("Error_Load_Abort_Text"),r=c.ErrorCode.RequestDataError):t._eventState==c.LOAD_START?(s=p.get("Error_Network_Text"),0<t._options.source.indexOf("auth_key")&&(s=s+"，"+p.get("Error_AuthKey_Text")),r=c.ErrorCode.StartLoadData):t._eventState==c.LOADED_METADATA&&(s=p.get("Error_Play_Text"),r=c.ErrorCode.PlayingError),s=s+"，"+p.get("Error_Retry_Text"),1<t._urls.length&&t._retrySwitchUrlCount<3&&-1==t._options.source.indexOf(".mpd")&&(t.switchUrl(),a=!0);var l={mediaId:t._options.vid?t._options.vid:"",error_code:r,error_msg:n};t.logError(l),l.display_msg=s,a||t.trigger(u.Player.Error,l)}}}},{"../../../../lang/index":16,"../../../../lib/constants":19,"../../../../lib/playerutil":29,"../../../../lib/ua":31,"../../event/eventtype":38}],51:[function(e,t,i){var o=e("../../../../lib/event"),n=e("../../event/eventtype"),r={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate")},s=function(t,i,r){var e=t.tag;o.on(e,i,function(e){r.handle.call(t,e,i),i!=n.Video.Error&&t.trigger(n.Private.LifeCycleChanged,{type:i,data:e})})};t.exports.bind=function(e){e.tag;for(var t in n.Video){var i=n.Video[t];s(e,i,void 0!==r[i]?r[i]:r.common)}}},{"../../../../lib/event":23,"../../event/eventtype":38,"./canplay":46,"./canplaythrough":47,"./common":48,"./ended":49,"./error":50,"./pause":52,"./play":53,"./playing":54,"./timeupdate":55,"./waiting":56}],52:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.trigger(r.Private.AutoStreamHide),t.trigger(r.Player.Pause),t.waiting=!1}},{"../../event/eventtype":38}],53:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(r.Private.Error_Hide),t.trigger(r.Private.Cover_Hide),t.trigger(r.Private.AutoStreamHide),t.waiting=!1,t.trigger(r.Player.Play)}},{"../../event/eventtype":38}],54:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(r.Private.H5_Loading_Hide),t.trigger(r.Private.Cover_Hide),t.trigger(r.Private.Info_Hide),t.waiting=!1,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.trigger(r.Private.AutoStreamHide),t.trigger(r.Player.Playing),t.trigger(r.Private.Play_Btn_Hide)}},{"../../event/eventtype":38}],55:[function(e,t,i){var r=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(r.Player.TimeUpdate,e.timeStamp),this.trigger(r.Private.H5_Loading_Hide),this.trigger(r.Private.H5_Loading_Hide),this.trigger(r.Private.AutoStreamHide)}},{"../../event/eventtype":38}],56:[function(e,t,i){var r=e("../../event/eventtype");e("../../../../lib/constants"),e("../../../../lang/index"),t.exports.handle=function(e){var t=this;t.trigger(r.Private.H5_Loading_Show),t.waiting=!0,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=setTimeout(function(){t.trigger(r.Private.AutoStreamShow)},1e3*t._options.loadDataTimeout),t.trigger(r.Player.Waiting)}},{"../../../../lang/index":16,"../../../../lib/constants":19,"../../event/eventtype":38}],57:[function(e,t,i){var s=e("../../ui/component"),a=e("../../lib/object"),o=e("../../lib/dom"),n=e("../../lib/event"),l=(e("../../lib/io"),e("../../ui/exports")),u=(e("../../ui/component/error-display"),e("../../ui/component/info-display"),e("../../monitor/monitor")),r=e("../../lib/ua"),c=e("../../lib/constants"),p=e("../../lib/util"),d=(e("../../config"),e("../../lib/playerutil")),h=e("./x5play"),f=e("../../lib/cookie"),y=e("../../lang/index"),_=e("../../feature/autoPlayDelay"),v=e("./event/eventmanager"),m=e("../../ui/component/cover"),g=e("../../ui/component/play-animation"),S=e("../../commonui/autostreamselector"),x=e("./event/eventtype"),b=e("./plugin/lifecyclemanager"),T=e("../service/fullscreenservice"),E=e("../service/liveshiftservice"),P=s.extend({init:function(e,t){if(this.tag=e,this.loaded=!1,this.played=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._seeking=!1,this._serverRequestId=0,this._created=!1,void 0===t.skinLayout&&(t.skinLayout=d.defaultH5Layout),s.call(this,this,t),this.addClass("prism-player"),t.plugins&&a.each(t.plugins,function(e,t){this[e](t)},this),this.fullscreenService=new T(this),d.isLiveShift(t)&&(this._liveshiftService=new E(this)),this.UI={},t.useNativeControls?this.tag.setAttribute("controls","controls"):this.UI=l,this.initChildren(),v.onAll(this),this._lifeCycleManager=new b(this),this._monitor=new u(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source},this._options.trackLog),this.checkOnline()){if(this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()){var i={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.InvalidParameter,error_msg:y.get("ShiftLiveTime_Error")};return void this.trigger(x.Player.Error,i)}if(this._extraMultiSources(),this._options.source)if(this._options.autoPlayDelay){var r=new _(this),o=this;r.handle(function(){o.initPlay()})}else this.initPlay();if(this._options.extraInfo){var n=this._options.extraInfo;n.liveRetry&&(this._options.liveRetry=n.liveRetry)}this.on(x.Private.ReadyState,function(){this.trigger(x.Player.Ready)}),this._options.readyCallback(this)}}});P.prototype.initPlay=function(e){this._initPlayBehavior(e,this._options.source)},P.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!a.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),s.prototype.initChildren.call(this)),e.preload||e.autoplay||(this.UI.cover=m,this.addChild("cover",e)),this.UI.playanimation=g,this.addChild("playanimation",e),this.UI.autoStreamSelector=S,this.addChild("autoStreamSelector",e),this.trigger(x.Private.UiH5Ready)},P.prototype.createEl=function(){var e=!1;"VIDEO"!==this.tag.tagName?(this._el=this.tag,this.tag=s.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""))):(e=!0,this._el=this.tag.parentNode);var t=this._el,i=this.tag;this._options.enableSystemMenu||(i.addEventListener?i.addEventListener("contextmenu",function(e){e.preventDefault()},!1):i.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),i.player=this;var r=o.getElementAttributes(i);return a.each(r,function(e){t.setAttribute(e,r[e])}),this.setVideoAttrs(),e||(i.parentNode&&i.parentNode.insertBefore(t,i),o.insertFirst(i,t)),t},P.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",e&&this.tag.setAttribute("preload","preload"),t&&this.tag.setAttribute("autoplay","autoplay"),this._options.extraInfo)for(var i in this._options.extraInfo)this.tag.setAttribute(i,this._options.extraInfo[i]);h.adaptX5Play(this)},P.prototype.checkOnline=function(){if(this._options.debug)return!0;if(0==navigator.onLine){var e={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")};return this.logError(e),e.display_msg=y.get("Error_Offline_Text"),this.trigger(x.Player.Error,e),!1}return!0},P.prototype.id=function(){return this.el().id},P.prototype.renderUI=function(){},P.prototype.switchUrl=function(){if(0!=this._urls.length){this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++);var e=this._urls[this._currentPlayIndex];f.set(c.SelectedStreamLevel,e.definition,365),this.trigger(x.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),this.getCurrentTime(),this._options.source=e.Url,this.tag.setAttribute("src",this._options.source),this.tag.play()}},P.prototype.setControls=function(){var e=this.options();if(e.useNativeControls)this.tag.setAttribute("controls","controls");else if("object"==_typeof(e.controls)){var t=this._initControlBar(e.controls);this.addChild(t)}},P.prototype._initControlBar=function(e){return new ControlBar(this,e)},P.prototype.getMetaData=function(){var i=this,r=null,o=this.tag;r=window.setInterval(function(e){if(i.tag){if(0<o.readyState){var t=Math.round(o.duration);i.tag.duration=t,i.trigger(x.Private.ReadyState),clearInterval(r)}}else clearInterval(r)},100)},P.prototype.getReadyTime=function(){return this.readyTime},P.prototype.readyState=function(){return this.tag.readyState},P.prototype.getError=function(){return this.tag.error},P.prototype.getRecentOccuredEvent=function(){return this._eventState},P.prototype.getSourceUrl=function(){return this._options?this._options.source:""},P.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},P.prototype.getCurrentQuality=function(){if(0<this._urls){var e=this._urls[this._currentPlayIndex];return{width:e.width,url:e.Url,definition:e.definition}}return""},P.prototype.setSpeed=function(e){this.tag&&(this._originalPlaybackRate=e,this.tag.playbackRate=e)},P.prototype.play=function(){return(this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(x.Private.Cover_Hide),this.tag.play(),this},P.prototype.replay=function(){return this.seek(0),this.tag.play(),this},P.prototype.pause=function(){return this.tag.pause(),this},P.prototype.stop=function(){return this.tag.setAttribute("src",null),this},P.prototype.paused=function(){return!1!==this.tag.paused},P.prototype.getDuration=function(){var e=0;return this.tag&&(e=this.tag.duration),e},P.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0},P.prototype.seek=function(e){e===this.tag.duration&&e--;var t=this._originalPlaybackRate||this.tag.playbackRate;try{var i=this;this.tag.currentTime=e,setTimeout(function(){i.tag.playbackRate=t})}catch(e){console.log(e)}return this},P.prototype.firstNewUrlloadByUrl=function(e,t){this._clearLiveErrorHandle(),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this.initPlay(),(this._options.preload||this._options.autoplay)&&this.trigger(x.Private.Cover_Hide),this._options.autoplay?this.trigger(x.Player.Play):this.trigger(x.Player.Pause),t||(t=0),!t&&0!=t||isNaN(t)||this.seek(t)},P.prototype.loadByUrl=function(e,t,i){this._clearLiveErrorHandle(),this.trigger(x.Private.Error_Hide),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this._options._autoplay=i,this.initPlay(i),(this._options.preload||this._options.autoplay)&&this.trigger(x.Private.Cover_Hide),this._options.autoplay||i?this.trigger(x.Player.Play):this.trigger(x.Player.Pause);var r=this;n.one(this.tag,x.Video.CanPlay,function(e){!t&&0!=t||isNaN(t)||r.seek(t)})},P.prototype.dispose=function(){this.trigger(x.Private.Dispose),this.tag.pause(),v.offAll(this),this.tag=null,this._options=null,this._monitor&&(this._monitor.removeEvent(),this._monitor=null)},P.prototype.mute=function(){this._muteInner(),this._originalVolumn=this.tag.volume;var e=y.get("Volume_Mute");return this._player.trigger(x.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(0),this},P.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(x.Private.VolumnChanged,-1)},P.prototype.unMute=function(){this._unMuteInner();var e=y.get("Volume_UnMute");return this._player.trigger(x.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(this._originalVolumn||.5),this},P.prototype._unMuteInner=function(){this.tag.muted=!1,this.trigger(x.Private.VolumnChanged,-2)},P.prototype.muted=function(){return this.tag.muted},P.prototype.getVolume=function(){return this.tag.volume},P.prototype.getOptions=function(){return this._options},P.prototype.setVolume=function(e,t){0!=e?this._unMuteInner():0==e&&this._muteInner(),this._setInnerVolume(e);var i=y.get("Curent_Volume")+"<span>"+(100*e).toFixed()+"%</span>";this._player.trigger(x.Private.Info_Show,{text:i,duration:1e3,align:"lb"})},P.prototype._setInnerVolume=function(e){this.tag.volume=e,this.trigger(x.Private.VolumnChanged,e)},P.prototype.hideProgress=function(){this.trigger(x.Private.HideProgress)},P.prototype.cancelHideProgress=function(){this.trigger(x.Private.CancelHideProgress)},P.prototype.setPlayerSize=function(e,t){this._el.style.width=e,this._el.style.height=t},P.prototype.getBuffered=function(){return this.tag.buffered},P.prototype.setRotate=function(e){this.tag&&(this._rotate=e,this._setTransform())},P.prototype.getRotate=function(e){return void 0===this._rotate?0:this._rotate},P.prototype.setImage=function(e){this.tag&&(this._image=e,this._setTransform())},P.prototype.getImage=function(){return this._image},P.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform())},P.prototype._setTransform=function(){this._transformProp||(this._transformProp=o.getTransformName(this.tag));var e=" translate(-50%, -50%)";this._rotate&&(e+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?e+=" scaleY(-1)":"horizon"==this._image&&(e+=" scaleX(-1)")),this.tag.style[this._transformProp]=e},P.prototype._initPlayBehavior=function(e,t){if(this._checkSupportVideoType())return!1;if(!d.validateSource(t)){var i={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"};return this.logError(i),i.display_msg=y.get("Error_Invalidate_Source"),this.trigger(x.Player.Error,i),!1}return this.trigger(x.Private.H5_Loading_Hide),void 0===e&&(e=!1),this._created||(this._created=!0,this.trigger(x.Private.Created)),this.loaded||this.trigger(x.Player.Init),(this._options.autoplay||this._options.preload||e)&&(this._initLoad(t),this._options.autoplay||this._options._autoplay?this.tag.play():this.trigger(x.Private.Play_Btn_Show)),!0},P.prototype._initLoad=function(e){this._options.autoplay&&this.trigger(x.Private.H5_Loading_Show),this.getMetaData(),e&&this.tag.setAttribute("src",e),this.loaded=!0},P.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&clearTimeout(this._liveErrorHandle)},P.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(x.Player.OnM3u8Retry);var e=this._options,t=e.liveRetryInterval+e.liveRetryStep*player._liveRetryCount;p.sleep(1e3*t),this._liveRetryCount++,this.tag.load(this._options.source),this.tag.play()},P.prototype._checkSupportVideoType=function(){if(!this.tag.canPlayType||!this._options.source||!r.IS_MOBILE)return"";var e=this._options.source,t="";if(0<e.indexOf("m3u8")?""!=this.tag.canPlayType("application/x-mpegURL")||d.isSupportHls()||(t=y.get("Error_Not_Support_M3U8_Text")):0<e.indexOf("mp4")?""==this.tag.canPlayType("video/mp4")&&(t=y.get("Error_Not_Support_MP4_Text")):(d.isRTMP(e)||d.isFlv(e))&&r.IS_MOBILE&&(t=y.get("Error_Not_Support_Format_On_Mobile")),t){var i={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.FormatNotSupport,error_msg:t};this.logError(i),i.display_msg=t,this.trigger(x.Player.Error,i)}return t},P.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)},P.prototype.logError=function(e){e||(e={}),e.vt=this.getCurrentTime(),this._serverRequestId=this.log("ERROR",e)},P.prototype.log=function(e,t){var i=0,r=0;if(this._monitor)return this._options&&(i=this._options.vid||"0",r=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:i,album_id:0,source:this._options.source,from:r}),this._monitor._log(e,t)},P.prototype.setSanpshotProperties=function(e,t,i){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=e,this._snapshotMatric.height=t,1<i)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=i},P.prototype.getStatus=function(){return this._status?this._status:"init"},P.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},P.prototype._overrideNativePlay=function(){var r=this.tag.play,o=this;this.tag.play=function(){if(!o._options.source){var e={mediaId:o._options.vid?o._options.vid:"",error_code:c.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"};return e.display_msg=y.get("Error_Invalidate_Source"),void o.trigger(x.Player.Error,e)}o.readyTime=(new Date).getTime();var t=r.apply(o.tag);void 0!==t&&t.catch(function(e){o.trigger(x.Private.Play_Btn_Show),o.trigger(x.Player.AutoPlayPrevented)}).then(function(){});var i=o._originalPlaybackRate||o.tag.playbackRate;setTimeout(function(){o.tag.playbackRate=i})}},P.prototype._extraMultiSources=function(){var e=this._options.source;if(e&&-1<e.indexOf("{")&&-1<e.indexOf("}")){var t="";try{t=JSON.parse(e)}catch(e){console.error(e),console.error("地址json串格式不对")}var i=[];for(var r in t){var o=c.QualityLevels[r];i.push({definition:r,Url:t[r],desc:o||r})}if(0<i.length){this._currentPlayIndex=d.findSelectedStreamLevel(i);var n=i[this._currentPlayIndex];this._urls=i,this._options.source=n.Url,this.trigger(x.Private.SourceLoaded,n)}}},t.exports=P},{"../../commonui/autostreamselector":7,"../../config":10,"../../feature/autoPlayDelay":12,"../../lang/index":16,"../../lib/constants":19,"../../lib/cookie":20,"../../lib/dom":22,"../../lib/event":23,"../../lib/io":25,"../../lib/object":27,"../../lib/playerutil":29,"../../lib/ua":31,"../../lib/util":33,"../../monitor/monitor":34,"../../ui/component":80,"../../ui/component/cover":83,"../../ui/component/error-display":84,"../../ui/component/info-display":87,"../../ui/component/play-animation":89,"../../ui/exports":97,"../service/fullscreenservice":77,"../service/liveshiftservice":78,"./event/eventmanager":37,"./event/eventtype":38,"./plugin/lifecyclemanager":60,"./x5play":62}],58:[function(e,t,i){var r=e("../../../lib/oo").extend({});t.exports=r},{"../../../lib/oo":28}],59:[function(e,t,i){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose"}},{}],60:[function(e,t,i){var u=e("../../../lib/object"),c=e("../event/eventtype"),p=e("./lifecycle"),r=e("./status"),o=function(t){(this._player=t)._status="init",this.components=[];var e=t.getOptions().components;if(e&&u.isArray(e)&&0<e.length)for(var i=0;i<e.length;i++){var r=e[i],o=void 0===r.type?r:r.type,n=void 0===r.args?[]:r.args,s=void 0===r.name?"":r.name;n=n&&0<n.length?[].concat.call([o],n):[];var a=new(Function.prototype.bind.apply(o,n));createEl=a[p.createEl],createEl&&"function"==typeof createEl&&createEl.call(a,t.el()),this.components.push({name:s,obj:a})}var l=this;t.on(c.Private.LifeCycleChanged,function(e){0!=l.components.length&&d.call(l,t,e)})};o.prototype.getComponent=function(e){var t=null,i=this.components.length;if(e)for(var r=0;r<i;r++)if(this.components[r].name==e){t=this.components[r].obj;break}return t};var d=function(e,t){if(t){var i=t.paramData,r=i.type,o=i.data;((u=r)==c.Video.LoadStart||u==c.Video.LoadedData||u==c.Video.LoadedMetadata)&&(r=p.loading),h(e,r);for(var n=this.components.length,s=0;s<n;s++){var a=this.components[s].obj,l=a[r];l&&"function"==typeof l&&l.call(a,e,o)}r==c.Private.Dispose&&(this.components=[])}var u},h=function(e,t){void 0!==r[t]&&(t!=r.pause||e._status!=r.error&&e._status!=r.ended)&&(e._status=t)};t.exports=o},{"../../../lib/object":27,"../event/eventtype":38,"./lifecycle":59,"./status":61}],61:[function(e,t,i){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],62:[function(e,t,i){var r=e("../../lib/ua"),o=e("../../lib/dom"),n=function(e,t){var i=e.el().style.height,r=e.el().style.width;e.originalLayout={container:{height:i,width:r},video:{width:e.tag.style.width,height:e.tag.style.height}};var o=document.body.clientHeight+"px",n=document.body.clientWidth+"px";t?(height=o,width=n):(height=i.indexOf("%")?i:i+"px",width=r.indexOf("%")?r:r+"px"),e.tag.style.width=n,e.tag.style.height=o,e.el().style.height=t?o:height};t.exports.isAndroidX5=function(){return r.os.android&&r.is_X5||r.dingTalk()},t.exports.adaptX5Play=function(e){r.os.android&&r.is_X5&&("h5"==e._options.x5_type&&(e.tag.setAttribute("x5-video-player-type",e._options.x5_type),window.onresize=function(){n(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position)},e.tag.addEventListener("x5videoenterfullscreen",function(){n(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position),e.trigger("x5requestFullScreen")}),e.tag.addEventListener("x5videoexitfullscreen",function(){(function(e,t){if(e.originalLayout){var i=e.originalLayout;e.el().style.height=i.container.height,e.el().style.width=i.container.width,e.tag.style.width=i.video.width,e.tag.style.height=i.video.height}})(e),e.trigger("x5cancelFullScreen")}),e.on("requestFullScreen",function(){"center"!=e._options.x5_video_position&&o.removeClass(e.tag,"x5-top-left")}),e.on("cancelFullScreen",function(){"center"!=e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left")})),void 0!==e._options.x5_fullscreen&&e._options.x5_fullscreen&&(e.tag.setAttribute("x5-video-player-fullscreen",e._options.x5_fullscreen),o.addClass(e.tag,"x5-full-screen")),"center"!=e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left"),void 0!==e._options.x5_orientation&&e.tag.setAttribute("x5-video-orientation",e._options.x5_orientation))}},{"../../lib/dom":22,"../../lib/ua":31}],63:[function(e,t,i){var o=e("../../ui/component"),n=e("../../lib/data"),a=e("../../lib/ua"),s=e("../../lib/constants"),l=e("../../lib/dom"),u=e("../../lib/object"),c=e("../../config"),p=e("../../lang/index"),d=e("../../lib/playerutil"),h=e("../../lib/util"),f=e("../../ui/component/info-display"),y=e("../../ui/component/error-display"),r=e("../../feature/autoPlayDelay"),_=e("../../commonui/autostreamselector"),v=e("../base/event/eventtype"),m=e("../saas/ststoken"),g=o.extend({init:function(e,t){if(void 0===t.skinLayout&&(t.skinLayout=d.defaultFlashLayout),o.call(this,this,t),this._id="prism-player-"+n.guid(),this.tag=e,this._el=this.tag,this._childrenUI=[f,y],this.initChildren(),this.id=this._id,window[this.id]=this,p.setCurrentLanguage(this._options.language,"flash"),h.openInFile()){var i={mediaId:this._options.vid?this._options.vid:"",error_code:s.ErrorCode.FormatNotSupport,error_msg:p.get("Open_Html_By_File","flash")};this.trigger(v.Private.Error_Show,i)}else if(a.IS_MOBILE)this.trigger(v.Private.Error_Show,{mediaId:this._options.vid?this._options.vid:"",error_code:s.ErrorCode.FormatNotSupport,error_msg:p.get("Cant_Use_Flash_On_Mobile","flash")});else{if(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret){var r=this;m.getPlayAuth(this._options,function(e){r._options.playauth=e,r._createPlayer()},function(e){var t={mediaId:r._options.vid,error_code:e.Code,error_msg:e.Message};e.sri&&(t.sri=e.sri),t.display_msg=e.display_msg,r.trigger(v.Private.Error_Show,t)},"flash")}else this._createPlayer();this._status="init"}},_createPlayer:function(){if(this._options.autoPlayDelay){var e=new r(this),t=this;e.handle(function(){t._options.autoplay=!0,t._initPlayer(),t._childrenUI.push(_),t.initChildren()})}else this._initPlayer(),this._childrenUI.push(_),this.initChildren()},_initPlayer:function(){var e="//"+c.domain+"/de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",t=this._comboFlashVars(),i=this._options.wmode?this._options.wmode:"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+e+'"><param name=quality value=High><param name="FlashVars" value="'+t+'"><param name="WMode" value="'+i+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+e+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+i+'" FlashVars="'+t+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_getLowerQualityLevel:function(){var e=this._getVideoUrls();if(!e)return"";var t=e.Urls,i=e.index;return t&&0==t.length||-1==i?"":0<i?{item:t[i-1],index:i-1}:""},_comboFlashVars:function(){var e=encodeURIComponent(a.getReferer()),t=a.getHref(),i=encodeURIComponent(t),r="";t&&(r=a.getHost(t));var o=this._options,n={autoPlay:o.autoplay?1:0,isInner:0,actRequest:1,vid:o.vid,domain:o.domain?o.domain:"//tv.taobao.com",statisticService:o.statisticService?o.statisticService:c.logReportTo,videoInfoService:o.videoInfoService?o.videoInfoService:"/player/json/getBaseVideoInfo.do",disablePing:o.trackLog?0:1,namespace:this.id,barMode:0!=o.barMode?1:0,isLive:o.isLive?1:0,waterMark:o.waterMark,environment:o.environment,vurl:o.source?encodeURIComponent(o.source):"",plugins:o.plugins?o.plugins:"",snapShotShow:o.snapshot?1:0,accessId:o.accId?o.accId:"",accessKey:o.accSecret?o.accSecret:"",apiKey:o.apiKey?o.apiKey:"",flashApiKey:o.flashApiKey?o.flashApiKey:"",disableSeek:o.disableSeek?1:0,disableFullScreen:o.disableFullScreen?1:0,stsToken:o.stsToken?o.stsToken:"",domainRegion:o.domainRegion?o.domainRegion:"",authInfo:o.authInfo?encodeURIComponent(o.authInfo):"",playDomain:o.playDomain?o.playDomain:"",stretcherZoomType:o.stretcherZoomType?o.stretcherZoomType:"",playauth:o.playauth?o.playauth.replace(/\+/g,"%2B"):"",prismType:o.prismType?o.prismType:0,formats:o.formats?o.formats:"",notShowTips:o.notShowTips?1:0,showBarTime:o.showBarTime?o.showBarTime:0,showBuffer:0==o.showBuffer?0:1,rePlay:o.rePlay?1:0,encryp:o.encryp?o.encryp:"",secret:o.secret?o.secret:"",mediaType:"video",logInfo:{ud:a.getHost(o.source),os:a.os.name,ov:a.os.version||"",et:a.browser.name,ev:a.browser.version||"",uat:a.USER_AGENT,r:e,pu:i,app_n:r}},s=[];return o.cover&&(n.cover=o.cover),o.extraInfo&&(n.extraInfo=encodeURIComponent(JSON.stringify(o.extraInfo))),n.logInfo&&(n.logInfo=encodeURIComponent(JSON.stringify(n.logInfo))),n.languageData=encodeURIComponent(JSON.stringify(p.getLanguageData("flash"))),n.language=p.getCurrentLanguage(),u.each(n,function(e,t){s.push(e+"="+t)}),s.join("&")},initChildren:function(){for(var e=this._childrenUI.length,t=0;t<e;t++){var i=new this._childrenUI[t](this,this._options),r=i.el();r.id=i.id(),this.contentEl().appendChild(r),i.bindEvent()}var o=document.querySelector("#"+this._options.id+" .prism-info-display");l.css(o,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var e,t=this._options.skinRes,i=this._options.skinLayout;if(!1!==i&&!u.isArray(i))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof t)throw new Error("PrismPlayer Error: skinRes should be string!");e=0!=i&&0!==i.length&&{skinRes:t,skinLayout:i},this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var r=this;window.addEventListener("beforeunload",function(){try{r.flashPlayer.setPlayerCloseStatus()}catch(e){}})},jsReady:function(){return!0},snapshoted:function(e){var t=h.toBinary(e),i="data:image/jpeg;base64,"+e;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:i,binary:t})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){"ended"!=this._status&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(v.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(v.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){if("pause"!=this._status){this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle();var e=this;this._checkTimeoutHandle=setTimeout(function(){e.trigger(v.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus()}},startSeek:function(e){this.trigger("startSeek",e)},completeSeek:function(e){this.trigger("completeSeek",e)},_invoke:function(){var e=arguments[0],t=arguments;if(Array.prototype.shift.call(t),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready，please use api after ready event occured!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var e=this._invoke("getVideoUrls"),t=[];if(e&&e.Urls)for(var i=0;i<e.Urls.length;i++){var r=e.Urls[i].value,o=r.desc.indexOf("_"),n=p.get(r.definition,"flash");r.desc=0<o?n+"_"+r.height:n,t.push(r)}return{Urls:t,index:e.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){if(this.flashPlayer&&!this._checkVideoStatusHandler){var i=this;!function t(){i._checkVideoStatusHandler=setTimeout(function(){var e=i._getVideoStatus();"playing"==e.videoStatus&&"bufferFull"==e.bufferStatus?(i._status="playing",i._clearTimeoutHandle()):"videoPlayOver"==e.videoStatus&&(i._status="ended",i._clearTimeoutHandle()),t()},500)}()}},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(e){return this._invoke("changeStream",e)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._invoke("pauseVideo")},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){this._el.style.width=e,this._el.style.height=t}});t.exports=g},{"../../commonui/autostreamselector":7,"../../config":10,"../../feature/autoPlayDelay":12,"../../lang/index":16,"../../lib/constants":19,"../../lib/data":21,"../../lib/dom":22,"../../lib/object":27,"../../lib/playerutil":29,"../../lib/ua":31,"../../lib/util":33,"../../ui/component":80,"../../ui/component/error-display":84,"../../ui/component/info-display":87,"../base/event/eventtype":38,"../saas/ststoken":73}],64:[function(e,t,i){var u=e("../../lib/io"),c=e("../../config"),p=e("../../lib/constants"),d=e("../../lib/util"),h=e("../../lib/playerutil"),f=(e("../../lib/dom"),e("../../lib/ua")),y=e("../../lang/index"),_=e("../base/event/eventtype");t.exports.inject=function(e,t,i,r,o,n){var s,a=r.source;if(n||(s=a,!e._flv&&h.isFlv(s))){t.prototype._checkFlvReady=function(){if(null==e._flv)throw new Error("please invoke this method after ready event")},e._isFlv=!0,e._flv=null,e._isLoadedFlv=!1,e._originalUrl="",t.prototype.play=function(){this._checkFlvReady(),this._options.isLive&&this.tag.load();if(this.trigger(_.Private.Cover_Hide),0==this._seeking){var e=0;this.tag.ended||(e=this.getCurrentTime()),this.seek(e)}return this.tag.paused&&(this._hasLoaded||(this.getMetaData(),this._flv.load()),this._flv.play()),this},t.prototype.replay=function(){return this._checkFlvReady(),this.seek(0),this.tag.paused&&this._flv.play(),this},t.prototype.seek=function(e){this._checkFlvReady(),e===that.tag.duration&&e--;try{that._flv.currentTime=e}catch(e){console.log(e)}return this},t.prototype.pause=function(){return this._checkFlvReady(),this._flv.pause(),this},t.prototype.initPlay=function(e){if(f.browser.safari&&this.trigger(_.Private.Snapshot_Hide),d.contentProtocolMixed(a)){var t={mediaId:this._options.vid?this._options.vid:"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"};return t.display_msg=y.get("Request_Block_Text"),void this.trigger(_.Player.Error,t)}(that=this)._isLoadedFlv?buildHls(this,e):(this.trigger(_.Private.H5_Loading_Show),function(e){var t="//"+c.domain+"/de/prismplayer/"+c.h5Version+"/flv/aliplayer-flv-min.js",i=this;u.loadJS(t,function(){e.apply(i)})}.call(that,function(){this.trigger(_.Private.H5_Loading_Hide),this._isLoadedFlv=!0,function(e,t){e.destroy();var i=e._options.isLive,r={isLive:i,enableWorker:!0,stashInitialSize:2048};i?(r.enableStashBuffer=e._options.enableStashBufferForFlv,stashInitialSize=e._options.stashInitialSizeForFlv,r.autoCleanupSourceBuffer=!0):r.lazyLoadMaxDuration=600,e._originalUrl=e._options.source,e._flv=flvjs.createPlayer({type:"flv",isLive:i,url:e._options.source},r),l(e,e._flv),e._initPlayBehavior(t)&&(e._flv.attachMediaElement(e.tag),(e._options.preload||e._options.autoplay)&&(e._hasLoaded=!0,e._flv.load()),e._options.autoplay&&e._flv.play(),o&&o(e._flv))}(this,e)}))},t.prototype.destroy=function(){this._flv&&(this._flv.pause(),this._flv.unload(),this._flv.detachMediaElement(),this._flv.destroy()),this._flv=null},t.prototype.dispose=function(){i.dispose.call(this),this.destroy()},t.prototype.canSeekable=function(e){var t=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)};var l=function(u,e){var c=!1;e.on(flvjs.Events.ERROR,function(e,t,i){var r=p.ErrorCode.OtherError,o=y.get("Error_Play_Text");if(t==flvjs.ErrorDetails.NETWORK_EXCEPTION){var n=u.getOptions().source;!n||0!=n.toLowerCase().indexOf("http://")&&0!=n.toLowerCase().indexOf("https://")?(r=p.ErrorCode.InvalidSourceURL,o=y.get("Error_Invalidate_Source"),c=!0):navigator.onLine?(r=p.ErrorCode.RequestDataError,o=y.get("Maybe_Cors_Error")):(r=p.ErrorCode.NetworkError,o=y.get("Error_Network_Text"))}else t==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==i.code?(r=p.ErrorCode.NotFoundSourceURL,o=y.get("Error_Not_Found")):"403"==i.code?(r=p.ErrorCode.AuthKeyExpired,o=y.get("Error_AuthKey_Text"),c=!0):(r=p.ErrorCode.NetworkError,o=y.get("Error_Network_Text")):t==flvjs.ErrorDetails.NETWORK_TIMEOUT?(r=p.ErrorCode.LoadingTimeout,o=y.get("Error_Waiting_Timeout_Text")):t!=flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED&&t!=flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED||(r=p.ErrorCode.FormatNotSupport,o=y.get("Error_H5_Not_Support_Text"),c=!0);var s=function(){if(setTimeout(function(){u.trigger(_.Private.Play_Btn_Hide)}),u.checkOnline()){var e={mediaId:u._options.vid?u._options.vid:"",error_code:r,error_msg:i.msg};u.logError(e),e.display_msg=o,u.trigger(_.Player.Error,e)}};if(u._options.isLive&&!c){var a=u._options;if(a.liveRetry>u._liveRetryCount){0==u._liveRetryCount&&u.trigger(_.Player.OnM3u8Retry);var l=a.liveRetryInterval+a.liveRetryStep*u._liveRetryCount;d.sleep(1e3*l),u.loadByUrl(a.source),u._liveRetryCount++}else u._liveRetryCount=0,u.trigger(_.Player.LiveStreamStop),u._liveErrorHandle=setTimeout(s,500)}else s()})}}}},{"../../config":10,"../../lang/index":16,"../../lib/constants":19,"../../lib/dom":22,"../../lib/io":25,"../../lib/playerutil":29,"../../lib/ua":31,"../../lib/util":33,"../base/event/eventtype":38}],65:[function(e,t,i){var r=e("../base/player"),o=e("./flvinjector"),n=r.extend({init:function(e,t){o.inject(this,n,r.prototype,t,function(e){}),r.call(this,e,t)}});t.exports=n},{"../base/player":57,"./flvinjector":64}],66:[function(e,t,i){var p=e("../../lib/io"),d=e("../../config"),h=e("../../lib/constants"),f=e("../../lib/util"),y=e("../../lib/playerutil"),_=(e("../../lib/dom"),e("../../lang/index")),v=e("../base/event/eventtype");t.exports.inject=function(e,t,i,r,o,n){var s,a,l=r.source,u=r.useHlsPluginForSafari;if(n||(s=l,a=u,!e._hls&&y.isHls(s)&&(!y.canPlayHls()||y.isSafariUsedHlsPlugin(a)))){t.prototype._checkHlsReady=function(){if(null==e._hls)throw new Error("please invoke this method after ready event")},e._isHls=!0,e._hls=null,e._isLoadedHls=!1,t.prototype.play=function(){if(this._checkHlsReady(),this.trigger(v.Private.Cover_Hide),this.tag.ended)this.replay();else{var e=this.getCurrentTime();this._hls.startLoad(e),this.tag.paused&&this.tag.play()}return this},t.prototype.replay=function(){return this.initPlay(!0),this.tag.paused&&this.tag.play(),this},t.prototype.pause=function(){return this._checkHlsReady(),this.tag.pause(),this._hls.stopLoad(),this},t.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(v.Player.OnM3u8Retry),this._liveRetryCount++},t.prototype.initPlay=function(e){function t(i,e){i.destroy(),i._hls=new Hls({xhrSetup:function(e,t){e.withCredentials=i._options.withCredentials||!1}}),o&&o(i._hls),c(i,i._hls),i._hls.loadSource(i._options.source),i._hls.attachMedia(i.tag),i._hls.on(Hls.Events.MANIFEST_PARSED,function(){i._initPlayBehavior(e)})}if(f.contentProtocolMixed(l)){var i={mediaId:this._options.vid?this._options.vid:"",error_code:h.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"};return i.display_msg=_.get("Request_Block_Text"),void this.trigger(v.Player.Error,i)}(that=this)._isLoadedHls?t(this,e):(this.trigger(v.Private.H5_Loading_Show),function(e){var t="//"+d.domain+"/de/prismplayer/"+d.h5Version+"/hls/aliplayer-hls-min.js",i=this;p.loadJS(t,function(){e.apply(i)})}.call(that,function(){this.trigger(v.Private.H5_Loading_Hide),this._isLoadedHls=!0,t(this,e)}))},t.prototype.destroy=function(){this._hls&&this._hls.destroy(),this._hls=null},t.prototype.dispose=function(){i.dispose.call(this),this.destroy()};var c=function(l,e){e.on(Hls.Events.ERROR,function(e,t){if(t.details!=Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&1!=l._seeking&&(0!=t.fatal||t.type==Hls.ErrorTypes.NETWORK_ERROR)){var i=h.ErrorCode.LoadedMetadata,r=_.get("Error_Play_Text"),o=!1;t.details==Hls.ErrorDetails.MANIFEST_LOAD_ERROR?(o=!0,t.networkDetails,"404"==t.response.code?(i=h.ErrorCode.NotFoundSourceURL,r=_.get("Error_Not_Found")):"403"==t.response.code?(i=h.ErrorCode.AuthKeyExpired,r=_.get("Error_AuthKey_Text")):"0"==t.response.code&&navigator.onLine?(i=h.ErrorCode.RequestDataError,r=r+"，"+_.get("Maybe_Cors_Error")):r=_.get("Error_Load_M3U8_Failed_Text")):t.details==Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT?(o=!0,r=_.get("Error_Load_M3U8_Timeout_Text")):t.details==Hls.ErrorDetails.MANIFEST_PARSING_ERROR||t.details==Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(o=!0,r=_.get("Error_M3U8_Decode_Text")):t.type==Hls.ErrorTypes.NETWORK_ERROR?(i=h.ErrorCode.NetworkError,r=_.get("Error_Network_Text")):t.type!=Hls.ErrorTypes.MUX_ERROR&&t.type!=Hls.ErrorTypes.MEDIA_ERROR||(i=h.ErrorCode.PlayDataDecode,r=_.get("Error_TX_Decode_Text")),r=r+"("+t.details+")";var n=function(){if(l.pause(),setTimeout(function(){l.trigger(v.Private.Play_Btn_Hide)}),l.checkOnline()){var e={mediaId:l._options.vid?l._options.vid:"",error_code:i,error_msg:t.details};l.logError(e),e.display_msg=r,l.trigger(v.Player.Error,e)}};if(l._options.isLive){var s=l._options;if(s.liveRetry>l._liveRetryCount){0==l._liveRetryCount&&l.trigger(v.Player.OnM3u8Retry);var a=s.liveRetryInterval+s.liveRetryStep*l._liveRetryCount;f.sleep(1e3*a),o&&l.loadByUrl(s.source),l._liveRetryCount++}else l._liveRetryCount=0,l.trigger(v.Player.LiveStreamStop),l._liveErrorHandle=setTimeout(n,500)}else n()}})}}}},{"../../config":10,"../../lang/index":16,"../../lib/constants":19,"../../lib/dom":22,"../../lib/io":25,"../../lib/playerutil":29,"../../lib/util":33,"../base/event/eventtype":38}],67:[function(e,t,i){var r=e("../base/player"),o=e("./hlsinjector"),n=r.extend({init:function(e,t){o.inject(this,n,r.prototype,t,function(e){}),r.call(this,e,t)}});t.exports=n},{"../base/player":57,"./hlsinjector":66}],68:[function(e,t,i){var r=e("../../lib/constants"),o=e("../../lib/oo").extend({init:function(e){this.player=e,this.tickhandle=null}});o.prototype.tick=function(e,t){var i=this;this.tickhandle=setTimeout(function(){i.player&&i.player.trigger(r.AuthKeyExpiredEvent),t&&t()},1e3*e)},o.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=o},{"../../lib/constants":19,"../../lib/oo":28}],69:[function(e,t,i){var u=e("../../lib/io"),c=e("../../lib/constants"),p=e("./signature"),d=e("./util"),h=e("../../lang/index"),f=function(e,o){var t="";e.sort(function(e,t){var i=parseInt(e.bitrate),r=parseInt(t.bitrate);if("desc"==o){if(r<i)return-1;if(i<r)return 1}else{if(i<r)return-1;if(r<i)return 1}});for(var i=e.length,r=0;r<i;r++){var n,s=e[r],a=c.QualityLevels[s.definition];n=void 0===a?s.bitrate:t==a?a+s.bitrate:a,s.desc=n,t=a}};t.exports.getDataByAuthInfo=function(e,r,o,n){var t=(p.returnUTCDate(),p.randomUUID()),i=p.randomUUID(),s={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:c.AuthKeyExpired,Rand:t,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i},a=p.makeUTF8sort(s,"=","&")+"&Signature="+p.AliyunEncodeURI(p.makeChangeSiga(s,e.accessSecret)),l="https://mts."+e.domainRegion+".aliyuncs.com/?"+a;u.get(l,function(e){if(e){var t=JSON.parse(e),i=t.PlayInfoList.PlayInfo;urls=function(e,t){for(var i=[],r=[],o=[],n=e.length-1;0<=n;n--){var s=e[n];"mp4"==s.format?r.push(s):"mp3"==s.format?o.push(s):i.push(s)}return 0<o.length?(f(o,t),o):0<r.lenght?(f(r,t),r):(f(i,t),i)}(i,r),o&&o({requestId:t.RequestId,urls:urls})}else n&&n(d.createError("MPS获取取数失败"))},function(e){if(n){var t={Code:"",Message:h.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}n({Code:c.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.requestId||""})}})}},{"../../lang/index":16,"../../lib/constants":19,"../../lib/io":25,"./signature":72,"./util":74}],70:[function(e,t,i){var r=e("./saasplayer"),o=(e("../../lib/constants"),e("./mts")),n=r.extend({init:function(e,t){r.call(this,e,t),this.service=o,this.loadByMts()}});n.prototype.loadByMts=function(){var e={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format};this.loadData(e)},n.prototype.replayByVidAndAuthInfo=function(e,t,i,r,o,n){this.reloadNewVideoInfo(e,t,i,r,o,n)},n.prototype.reloadNewVideoInfo=function(e,t,i,r,o,n){if(this.trigger("error_hide"),this._options.source="",e&&(this._options.vid=e,this._options.accId=t,this._options.accessSecret=i,this._options.stsToken=r,this._options.domainRegion=n,this._options.authInfo=o),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("需要提供vid、accId、accessSecret、stsToken、domainRegion和authInfo参数");this.loadByMts()},t.exports=n},{"../../lib/constants":19,"./mts":69,"./saasplayer":71}],71:[function(e,t,i){var n=e("../base/player"),r=e("../audio/audioplayer"),u=(e("../../lib/event"),e("../../lib/io"),e("../../lib/constants")),o=(e("./signature"),e("./authkeyexpiredhandle")),s=e("../hls/hlsinjector"),a=e("../flv/flvinjector"),c=(e("../../lib/cookie"),e("../../lang/index")),l=e("../../lib/playerutil"),p=e("../base/event/eventtype"),d=n.extend({init:function(e,t){this._authKeyExpiredHandle=new o(this),"mp3"==t.format?(t.height="auto",t.mediaType="audio",n.prototype.createEl=r.prototype.createEl,r.call(this,e,t)):n.call(this,e,t)}});d.prototype.loadData=function(e){var r=(new Date).getTime();this.log("STARTFETCHDATA",{});var o=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),this.service.getDataByAuthInfo(e,this._options.qualitySort,function(e){if(o.log("COMPLETEFETCHDATA",{cost:(new Date).getTime()-r}),e.urls&&0==e.urls.length)o._mtsError_message(o,{Code:u.ErrorCode.URLsIsEmpty,Message:c.get("Error_Vod_URL_Is_Empty_Text")},"");else{o._urls=e.urls,o._currentPlayIndex=l.findSelectedStreamLevel(o._urls);var t=e.urls[o._currentPlayIndex],i=t.Url;o._options.source=i,l.isHls(i)?s.inject(o,d,n.prototype,o._options):l.isFlv(i)&&a.inject(o,d,n.prototype,o._options),o._authKeyExpiredHandle.tick(u.AuthKeyRefreshExpired),o.trigger(p.Private.SourceLoaded,t),o.initPlay()}},function(e){o._mtsError_message(o,e,"")})},d.prototype._changeStream=function(e,t){this._urls.length>e&&(this.loadByUrl(this._urls[e].Url,this.getCurrentTime()),this._currentPlayIndex=e,this.trigger(p.Private.QualityChange,t||c.get("Quality_Change_Fail_Switch_Text")))},d.prototype._getLowerQualityLevel=function(){if(0==this._urls.length||-1==this._currentPlayIndex)return"";if("asc"==this.options().qualitySort){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""},d.prototype._mtsError_message=function(e,t,i){var r=e;r.trigger("h5_loading_hide");var o=t.Code?t.Code:"OTHER_ERR_CODE",n=t.Message?t.Message:"OTHER_ERR_MSG",s=(u.ErrorCode.ServerAPIError,t.display_msg||"");-1<n.indexOf("InvalidParameter.Rand")||-1<n.indexOf('"Rand" is not valid.')?(u.ErrorCode.EncrptyVideoNotSupport,s=c.get("Error_Not_Support_encrypt_Text")):-1<n.indexOf("SecurityToken.Expired")?(u.ErrorCode.AuthKeyExpired,s=c.get("Error_Playauth_Expired_Text")):-1<n.indexOf("InvalidVideo.NoneStream")&&(u.ErrorCode.URLsIsEmpty,s=c.get("Error_Fetch_NotStream")+"(format="+r._options.format+")");var a=r._options.vid?r._options.vid:"0",l=(r._options.from&&r._options.from,{mediaId:a,error_code:o,error_msg:n});t.sri&&(l.sri=t.sri),r.logError(l),l.display_msg=s||c.get("Error_Vod_Fetch_Urls_Text"),r.trigger("error",l),console.log("PrismPlayer Error: "+i+"! error_msg :"+n+";")},t.exports=d},{"../../lang/index":16,"../../lib/constants":19,"../../lib/cookie":20,"../../lib/event":23,"../../lib/io":25,"../../lib/playerutil":29,"../audio/audioplayer":36,"../base/event/eventtype":38,"../base/player":57,"../flv/flvinjector":64,"../hls/hlsinjector":66,"./authkeyexpiredhandle":68,"./signature":72}],72:[function(e,c,t){var r=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),i=e("crypto-js/enc-utf8");c.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",i=0;i<36;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},c.exports.returnUTCDate=function(){var e=new Date,t=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDate(),o=e.getUTCHours(),n=e.getUTCMinutes(),s=e.getUTCSeconds(),a=e.getUTCMilliseconds();return Date.UTC(t,i,r,o,n,s,a)},c.exports.AliyunEncodeURI=function(e){var t=encodeURIComponent(e);return(t=(t=t.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},c.exports.makesort=function(e,t,i){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var r=[];for(var o in e)r.push(o);var n=r.sort(),s="",a=n.length;for(o=0;o<a;o++)""==s?s=n[o]+t+e[n[o]]:s+=i+n[o]+t+e[n[o]];return s},c.exports.makeUTF8sort=function(e,t,i){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var r=[];for(var o in e)r.push(o);var n=r.sort(),s="",a=n.length;for(o=0;o<a;o++){var l=c.exports.AliyunEncodeURI(n[o]),u=c.exports.AliyunEncodeURI(e[n[o]]);""==s?s=l+t+u:s+=i+l+t+u}return s},c.exports.makeChangeSiga=function(e,t,i){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");return i||(i="GET"),o.stringify(r(i+"&"+c.exports.AliyunEncodeURI("/")+"&"+c.exports.AliyunEncodeURI(c.exports.makeUTF8sort(e,"=","&")),t+"&"))},c.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},c.exports.encPlayAuth=function(e){if(!(e=i.stringify(o.parse(e))))throw new Error("playuth参数解析为空");return JSON.parse(e)},c.exports.encRsa=function(){}},{"crypto-js/enc-base64":2,"crypto-js/enc-utf8":3,"crypto-js/hmac-sha1":4}],73:[function(e,t,i){var a=e("../../lib/io"),l=e("../../lib/constants"),u=e("./signature"),c=e("./util"),p=e("../../lang/index");t.exports.getPlayAuth=function(e,i,r,o){var t=(u.randomUUID(),u.randomUUID()),n={AccessKeyId:e.accessKeyId,Action:"GetVideoPlayAuth",VideoId:e.vid,AuthTimeout:l.AuthInfoExpired,SecurityToken:e.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:t},s="https://vod.cn-shanghai.aliyuncs.com/?"+u.makeUTF8sort(n,"=","&")+"&Signature="+u.AliyunEncodeURI(u.makeChangeSiga(n,e.accessKeySecret));a.get(s,function(e){if(e){var t=JSON.parse(e);i&&i(t.PlayAuth)}else r&&r(c.createError("获取视频播放凭证失败"))},function(e){if(r){var t=JSON.parse(e);r({Code:l.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.requestId,display_msg:p.get("Fetch_Playauth_Error",o)})}})}},{"../../lang/index":16,"../../lib/constants":19,"../../lib/io":25,"./signature":72,"./util":74}],74:[function(e,t,i){t.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}}},{}],75:[function(e,t,i){var l=e("../../lib/io"),u=e("../../lib/constants"),c=e("./signature"),p=e("./util"),d=e("../../config"),h=e("../../lang/index");t.exports.getDataByAuthInfo=function(e,r,o,n){var t=c.randomUUID(),i=c.randomUUID(),s={AccessKeyId:e.accessId,Action:"GetPlayInfo",VideoId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:u.AuthKeyExpired,Rand:t,SecurityToken:e.stsToken,StreamType:e.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i,PlayerVersion:d.h5Version,Channel:"HTML5"},a="https://vod.cn-shanghai.aliyuncs.com/?"+c.makeUTF8sort(s,"=","&")+"&Signature="+c.AliyunEncodeURI(c.makeChangeSiga(s,e.accessSecret));l.get(a,function(e){if(e){var t=JSON.parse(e),i=t.PlayInfoList.PlayInfo;urls=function(e,t){var i=[];"desc"==t&&e.reverse();for(var r=e.length-1;0<=r;r--){var o={};o.width=e[r].Width,o.height=e[r].Height,o.definition=e[r].Definition,o.Url=e[r].PlayURL,o.desc=u.QualityLevels[o.definition],i.push(o)}return i}(i,r),o&&o({requestId:t.RequestId,urls:urls})}else n&&n(p.createError("点播服务获取取数失败"))},function(e){if(n){var t={Code:"",Message:h.get("Error_Vod_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}n({Code:u.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.requestId||""})}})}},{"../../config":10,"../../lang/index":16,"../../lib/constants":19,"../../lib/io":25,"./signature":72,"./util":74}],76:[function(e,t,i){var r=e("./saasplayer"),n=e("../../lib/constants"),o=e("./vod"),s=e("./signature"),a=(e("./authkeyexpiredhandle"),e("./ststoken")),l=r.extend({init:function(e,t){r.call(this,e,t),this.service=o;var i=this;this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?a.getPlayAuth(this._options,function(e){i._options.playauth=e,i.loadByVod()},function(e){i._mtsError_message(i,e,"")}):i.loadByVod()}});l.prototype.loadByVod=function(){try{var e=s.encPlayAuth(this._options.playauth)}catch(e){var t={Code:n.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth解析错误"};return void this._mtsError_message(this,t,this._options.playauth)}this._options.from=e.CustomerId?e.CustomerId:"";var i=e.VideoMeta.CoverURL;this.UI.cover&&i&&!this._options.cover&&(document.querySelector("#"+this.id()+" .prism-cover").style.backgroundImage="url("+i+")");var r={vid:this._options.vid,accessId:e.AccessKeyId,accessSecret:e.AccessKeySecret,stsToken:e.SecurityToken,domainRegion:e.Region,authInfo:e.AuthInfo,playDomain:e.PlayDomain,format:this._options.format,mediaType:this._options.mediaType};this.loadData(r)},l.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),this._options.source="",this._options.vid=e,this._options.playauth=t,this.loadByVod()},l.prototype.updateSourcesByVidAndPlayAuth=function(e,t){if(e==this._options.vid){this._options.vid=e,this._options.playauth=t;try{var i=s.encPlayAuth(this._options.playauth)}catch(e){return void console.log("playauth解析错误")}var r={vid:e,accessId:i.AccessKeyId,accessSecret:i.AccessKeySecret,stsToken:i.SecurityToken,domainRegion:i.Region,authInfo:i.AuthInfo,playDomain:i.PlayDomain,format:this._options.format,mediaType:this._options.mediaTyp};this._authKeyExpiredHandle.clearTick();var o=this;this.service.loadData(r,this._options.qualitySort,function(e){o._serverRequestId=e.requestId,0!=e.urls.length&&(o._urls=e.urls),o._authKeyExpiredHandle.tick(n.AuthKeyRefreshExpired)},function(e){console.log(e)})}else console.log("不能更新地址，vid和播放中的不一致")},l.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t)},t.exports=l},{"../../lib/constants":19,"./authkeyexpiredhandle":68,"./saasplayer":71,"./signature":72,"./ststoken":73,"./vod":75}],77:[function(e,t,i){var r=e("../../lib/ua"),o=e("../../lib/dom"),n=e("../../lib/event"),s=e("../base/event/eventtype"),a=e("../base/x5play"),l=e("../../lang/index"),u=function(){var e;o.createEl("div"),e={};var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]];if(r.IS_IOS)e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen";else{for(var i=0;i<5;i++)if(t[i][1]in document){e.requestFn=t[i][0],e.cancelFn=t[i][1],e.eventName=t[i][4],e.isFullScreen=t[i][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?e.isFullScreen="mozFullScreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen")}return e.requestFn?e:null}(),c=function(e){this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=e;var t=this,i=u;i&&n.on(document,i.eventName,function(e){t.isFullScreen=document[i.isFullScreen],(t.isFullScreenChanged=!0)===t.isFullScreen?t._player.trigger(s.Player.RequestFullScreen):t._player.trigger(s.Player.CancelFullScreen)})};c.prototype.requestFullScreen=function(){if(!a.isAndroidX5()||!this._player.paused()){var e=u,t=this._player.el(),i=this;if(r.IS_IOS)return(t=this._player.tag)[e.requestFn](),i._player.trigger(s.Player.RequestFullScreen),this;this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer);i=this;return e?(t[e.requestFn](),this._requestFullScreenTimer=setTimeout(function(){i.isFullScreenChanged||(p.apply(i),i._player.trigger(s.Player.RequestFullScreen)),i._requestFullScreenTimer=null},500)):(p.apply(i),this._player.trigger(s.Player.RequestFullScreen)),this._player}this._player.trigger(s.Private.Info_Show,l.get("Play_Before_Fullscreen"))},c.prototype.cancelFullScreen=function(){var e=u;this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer);var t=this;return e?(document[e.cancelFn](),t._cancelFullScreenTimer=setTimeout(function(){t.isFullScreenChanged||(d.apply(t),t._player.trigger(s.Player.CancelFullScreen)),t._cancelFullScreenTimer=null},500)):(d.apply(t),this._player.trigger(s.Player.CancelFullScreen)),this._player.tag.paused||this._player.trigger(s.Player.Play),this._player},c.prototype.getIsFullScreen=function(){return this.isFullScreen};var p=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",o.addClass(document.getElementsByTagName("body")[0],"prism-full-window")},d=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,o.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=c},{"../../lang/index":16,"../../lib/dom":22,"../../lib/event":23,"../../lib/ua":31,"../base/event/eventtype":38,"../base/x5play":62}],78:[function(e,t,i){var o=e("../../lib/io"),n=e("../../lib/util"),s=e("../../lang/index"),a=e("../../lib/constants"),l=e("../base/event/eventtype"),u=function(e,t){if(e&&e){var i=new Date(e),r=new Date(t),o=r.valueOf()/1e3-i.valueOf()/1e3;return{start:i,end:r,endDisplay:n.extractTime(r),totalTime:o}}},c=function(e,t){t&&(e.currentTimestamp=t,e.currentTime=n.convertToDate(t),e.currentTimeDisplay=n.extractTime(e.currentTime),e.liveShiftStart=e.liveTimeRange.start,e.liveShiftEnd=e.liveTimeRange.end,e.liveShiftStartDisplay=n.extractTime(e.liveShiftStart),e.liveShiftEndDisplay=n.extractTime(e.liveShiftEnd),e.availableLiveShiftTime=t-e.liveShiftStart.valueOf()/1e3,e.timestampStart=n.convertToTimestamp(e.liveShiftStart),e.timestampEnd,n.convertToTimestamp(e.liveShiftEnd))},r=function(e){this._player=e,this._originalPlayUrl=e._options.source,this._liveShiftUrl=e._options.liveTimeShiftUrl,this.liveTimeRange=u(e._options.liveStartTime,e._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1;var r=this;e.liveShiftSerivce={setLiveTimeRange:function(e,t){r.setLiveTimeRange(e,t)},queryLiveShift:function(e,t,i){r.queryLiveShift(e,t,i)}}};r.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},r.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,-1==this.seekTime?n.parseTime(this.currentTimeDisplay):n.parseTime(this.liveShiftStartDisplay)+this.seekTime},r.prototype.getSourceUrl=function(e){var t=this._originalPlayUrl;return this.availableLiveShiftTime<=e?t:(e=this.timestampStart+parseInt(e),t=-1==t.indexOf("?")?t+"?lhs_start_unix_s_0="+e:t+"&lhs_start_unix_s_0="+e)},r.prototype.getTimeline=function(i,r){if(this._liveShiftUrl){var o=this;this.queryLiveShift(this._liveShiftUrl,function(e){if(e){var t=e;0==t.retCode?(c(o,t.content.current),o._player.trigger(l.Private.LiveShiftQueryCompleted),i&&i()):r({Code:a.ErrorCode.ServerAPIError,Message:t.retCode+"|"+t.description+"|"+t.content})}else console.log("获取直播时移数据失败")},function(e){if(r&&e){var t={};if(e){if(-1<e.indexOf("403 Forbidden"))t.Code=a.ErrorCode.AuthKeyExpired,t.Message="Query liveshift failed:"+s.get("Error_AuthKey_Text");else{var i;t=e;try{i=JSON.parse(e)}catch(e){}i&&(t.Code=a.ErrorCode.ServerAPIError,t.Message=i.retCode+"|"+i.description+"|"+i.content)}r(t)}}})}},r.prototype.start=function(t,i){var r=this;r.getTimeline(function(e){r._localLiveTimeHandler||r.tickLocalLiveTime()},i),function e(){r._loopHandler=setTimeout(function(){r.getTimeline(function(){},i),e()},t)}()},r.prototype.tickLocalLiveTime=function(){var t=this;!function e(){t._localLiveTimeHandler=setTimeout(function(){t.currentTimestamp++,c(t,t.currentTimestamp),t._player.trigger(l.Private.LiveShiftQueryCompleted),e()},1e3)}()},r.prototype.setLiveTimeRange=function(e,t){e||(e=this._player._options.liveStartTime),t||(t=this._player._options.liveOverTime),this.liveTimeRange=u(e,t),c(this,this.currentTimestamp),this._player.trigger(l.Private.LiveShiftQueryCompleted)},r.prototype.queryLiveShift=function(e,i,r){o.get(e,function(e){if(e){var t=JSON.parse(e);0==t.retCode?i&&i(t):r&&r(t)}else r&&r(e)},function(e){r&&r(e)})},r.prototype.stop=function(e){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},t.exports=r},{"../../lang/index":16,"../../lib/constants":19,"../../lib/io":25,"../../lib/util":33,"../base/event/eventtype":38}],79:[function(e,t,i){var s=e("../base/player"),a=e("../hls/hlsinjector"),r=e("../../lib/io"),o=s.extend({init:function(e,t){s.call(this,e,t),this.loadVideoInfo()}});o.prototype.loadVideoInfo=function(i){this.trigger("error_hide");var o=this._options.vid,n=this;if(!o)throw new Error("PrismPlayer Error: vid should not be null!");r.jsonp("//tv.taobao.com/player/json/getBaseVideoInfo.do?vid="+o+"&playerType=3",function(e){if(1!==e.status||!e.data.source)throw new Error("PrismPlayer Error: #vid:"+o+" cannot find video resource!");var t,r=-1;_.each(e.data.source,function(e,t){var i=+e.substring(1);r<i&&(r=i)}),t=e.data.source["v"+r],t=_.unescape(t),n._options.source=t,a.inject(n,TaobaoTVPlayer,s.prototype,n._options),n.initPlay(),i&&i()},function(){throw new Error("PrismPlayer Error: network error!")})},o.prototype.loadByVid=function(e){this._options.vid=e;var t=this;if(!e)throw new Error("PrismPlayer Error: vid should not be null!");this._monitor&&this._monitor.updateVideoInfo({video_id:e,album_id:data.data.baseInfo.aid,source:src,from:t._options.from}),this._options.autoplay=!0,this.loadVideoInfo(function(){t.cover&&t._options.autoplay&&(Dom.css(t.cover,"display","none"),delete t.cover),t.tag.play()})},t.exports=o},{"../../lib/io":25,"../base/player":57,"../hls/hlsinjector":66}],80:[function(e,t,i){var r=e("../lib/oo"),o=e("../lib/data"),s=e("../lib/object"),n=e("../lib/dom"),a=e("../lib/event"),l=e("../lib/function"),u=e("../lib/layout"),c=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype")),p=r.extend({init:function(e,t){var i=this;this._player=e,this._eventState="",this._options=s.copy(t),this._el=this.createEl();var r=e.id;"function"==typeof e.id&&(r=e.id()),this._id=r+"_component_"+o.guid(),this._children=[],this._childIndex={},this._player.on(c.Private.UiH5Ready,function(){i.renderUI(),i.syncUI(),i.bindEvent()})}});p.prototype.renderUI=function(){u.render(this.el(),this.options()),this.el().id=this.id()},p.prototype.syncUI=function(){},p.prototype.bindEvent=function(){},p.prototype.createEl=function(e,t){return n.createEl(e,t)},p.prototype.options=function(e){return void 0===e?this._options:this._options=s.merge(this._options,e)},p.prototype.el=function(){return this._el},p.prototype._contentEl,p.prototype.player=function(){return this._player},p.prototype.contentEl=function(){return this._contentEl||this._el},p.prototype._id,p.prototype.id=function(){return this._id},p.prototype.getId=function(){return this._id},p.prototype.addChild=function(e,t){var i;if("string"==typeof e){if(!this._player.UI[e])return;i=new this._player.UI[e](this._player,t)}else i=e;if(this._children.push(i),"function"==typeof i.id&&(this._childIndex[i.id()]=i),"function"==typeof i.el&&i.el()){var r=i.el();r.id=i.id(),this.contentEl().appendChild(r)}return i},p.prototype.removeChild=function(e){if(e&&this._children){for(var t=!1,i=this._children.length-1;0<=i;i--)if(this._children[i]===e){t=!0,this._children.splice(i,1);break}if(t){this._childIndex[e.id]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},p.prototype.initChildren=function(){var i,e,t,r,o;if(e=(i=this).options().children)if(s.isArray(e))for(var n=0;n<e.length;n++)"string"==typeof(t=e[n])?(r=t,o={}):(r=t.name,o=t),i.addChild(r,o);else s.each(e,function(e,t){!1!==t&&i.addChild(e,t)})},p.prototype.on=function(e,t){return a.on(this._el,e,l.bind(this,t)),this},p.prototype.off=function(e,t){return a.off(this._el,e,t),this},p.prototype.one=function(e,t){return a.one(this._el,e,l.bind(this,t)),this},p.prototype.trigger=function(e,t){return(t||0==t)&&(this._el.paramData=t),this._eventState=e,a.trigger(this._el,e),this},p.prototype.off=function(e){return a.off(this._el,e),this},p.prototype.addClass=function(e){return n.addClass(this._el,e),this},p.prototype.removeClass=function(e){return n.removeClass(this._el,e),this},p.prototype.show=function(){return this._el.style.display="block",this},p.prototype.hide=function(){return this._el.style.display="none",this},p.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;0<=e;e--)this._children[e].destroy&&this._children[e].destroy();this.children_=null,this.childIndex_=null,this.off(),this._el.parentNode&&this._el.parentNode.removeChild(this._el),o.removeData(this._el),this._el=null},t.exports=p},{"../lib/constants":19,"../lib/data":21,"../lib/dom":22,"../lib/event":23,"../lib/function":24,"../lib/layout":26,"../lib/object":27,"../lib/oo":28,"../lib/util":33,"../player/base/event/eventtype":38}],81:[function(e,t,i){var r=e("../component"),o=e("../../lib/dom"),n=(e("../../lib/event"),e("../../player/base/event/eventtype")),s=e("../../player/base/plugin/status"),a=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-big-play-btn")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t.addClass("playing"),t.removeClass("pause"),t._hide()}),this._player.on(n.Player.Pause,function(){t.removeClass("playing"),t.addClass("pause");var e=t._player._status;e!=s.ended&&e!=s.error&&t._show()}),this.on(n.Private.Click,function(){t._player.paused()?t._player.play():t._player.pause()}),this._player.on(n.Private.Play_Btn_Show,function(){t._show()}),this._player.on(n.Private.Play_Btn_Hide,function(){t._hide()})},_show:function(){o.css(this.el(),"display","block")},_hide:function(){o.css(this.el(),"display","none")}});t.exports=a},{"../../lib/dom":22,"../../lib/event":23,"../../player/base/event/eventtype":38,"../../player/base/plugin/status":61,"../component":80}],82:[function(e,t,i){var r=e("../component"),o=e("../../player/base/event/eventtype"),n=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=r.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var t=this.player(),e=t.options(),i=this;this.timer=null;var r=e.controlBarVisibility;1==e.controlBarForOver&&(r="hover"),"hover"==r?(i.hide(),t.on(o.Private.MouseOver,function(){i._show()}),t.on(o.Private.MouseOut,function(){i.hide(),t.trigger(o.Private.HideBar)})):"click"==r?(t.on(o.Private.Click,function(e){t._isError||(e.preventDefault(),e.stopPropagation(),i._show(),i._hide())}),t.on(o.Player.Ready,function(){i._hide()}),t.on(o.Private.TouchStart,function(){i._show()}),t.on(o.Private.TouchMove,function(){i._show()}),t.on(o.Private.TouchEnd,function(){i._hide()})):i._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t=this.player().options().showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(o.Private.HideBar)},t)}});t.exports=n},{"../../player/base/event/eventtype":38,"../component":80}],83:[function(e,t,i){var r=e("../component"),o=e("../../lib/dom"),n=e("../../player/base/event/eventtype"),s=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-cover")},createEl:function(){var e=r.prototype.createEl.call(this,"div"),t=this.options().cover;return t&&(e.style.backgroundImage="url("+t+")"),e},_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&o.css(t,"display","none")},_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&o.css(t,"display","block")},bindEvent:function(){this._player.on(n.Private.Cover_Show,this._show),this._player.on(n.Private.Cover_Hide,this._hide)}});t.exports=s},{"../../lib/dom":22,"../../player/base/event/eventtype":38,"../component":80}],84:[function(e,t,i){var r=e("../component"),h=e("../../lib/util"),f=e("../../lib/dom"),o=e("../../lib/event"),n=e("../../lib/ua"),y=e("../../lang/index"),s=e("../../player/base/event/eventtype"),a=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-ErrorMessage",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh' type='button'>"+y.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+y.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code：</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid：</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid：</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId：</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+y.get("Play_DateTime")+"：</span><span class='info-content'></span></p></div>",e},bindEvent:function(){var i=this;i._player.on(s.Private.Error_Show,function(e){var t=null;i._player.getMonitorInfo&&(t=i._player.getMonitorInfo()),i._show(e,t)}),i._player.on(s.Private.Error_Hide,i._hide);var e=document.querySelector("#"+i.id()+" .prism-button-refresh");if(o.on(e,"click",function(){location.reload(!0)}),n.IS_MOBILE){e=document.querySelector("#"+i.id()+" .prism-detect-info");f.addClass(e,"prism-width90")}},_show:function(e,t){var i=e.paramData,r="",o="";i.mediaId&&(r=i.mediaId);var n=document.querySelector("#"+this.id()+" .prism-button-orange");if(t){t.vu&&(o=decodeURIComponent(t.vu));var s="http://player.alicdn.com/detection.html?from=h5&vid="+r+"&source="+o+"&pd="+t.pd+"&vt="+t.vt+"&tt="+t.tt+"&uuid="+t.uuid+"&av="+t.av+"&bi="+t.bi+"&md="+t.md+"&vu="+o+"&lang="+y.getCurrentLanguage();n.href=s}else f.css(n,"display","none");var a=i.display_msg||i.error_msg;document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=a,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=i.error_code;var l=document.querySelector("#"+this.id()+" .vid");if(i.mediaId?(f.css(l,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=i.mediaId):f.css(l,"display","none"),i.uuid)document.querySelector("#"+this.id()+" .uuid .info-content").innerText=i.uuid;else{var u=document.querySelector("#"+this.id()+" .uuid");f.css(u,"display","none")}if(i.requestId)document.querySelector("#"+this.id()+" .requestId .info-content").innerText=i.requestId;else{var c=document.querySelector("#"+this.id()+" .requestId");f.css(c,"display","none")}document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=h.formatDate(new Date,"yyyy-MM-dd HH:mm:ss");var p=document.querySelector(".prism-ErrorMessage");f.css(p,"display","block");var d=this;setTimeout(function(){d._player.trigger("play_btn_hide")})},_hide:function(){var e=document.querySelector(".prism-ErrorMessage");f.css(e,"display","none")}});t.exports=a},{"../../lang/index":16,"../../lib/dom":22,"../../lib/event":23,"../../lib/ua":31,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],85:[function(e,t,i){var r=e("../component"),o=e("../../player/base/event/eventtype"),n=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(o.Player.RequestFullScreen,function(){e.addClass("fullscreen")}),this._player.on(o.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen()})}});t.exports=n},{"../../player/base/event/eventtype":38,"../component":80}],86:[function(e,t,i){var r=e("../component"),o=(e("../../lib/dom"),e("../../player/base/event/eventtype")),n=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-hide")},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<div class="circle"></div> <div class="circle1"></div>',e},_loading_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-loading");t&&(t.className="prism-hide")},_loading_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-hide");t&&(t.className="prism-loading")},bindEvent:function(){this._player.on(o.Private.H5_Loading_Show,this._loading_show),this._player.on(o.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=n},{"../../lib/dom":22,"../../player/base/event/eventtype":38,"../component":80}],87:[function(e,t,i){var r=e("../component"),o=(e("../../lib/util"),e("../../lib/dom")),n=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),s=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-info-display",this.addClass(this.className)},createEl:function(){return r.prototype.createEl.call(this,"p")},bindEvent:function(){var r=this;r._player.on(n.Private.Info_Show,function(e){var t=document.querySelector("#"+r.getId()),i=e.paramData;i&&(void 0!==i.text&&i.text?(t.innerHTML=i.text,void 0!==i.duration&&i.duration&&setTimeout(function(){o.css(t,"display","none")},i.duration),"bl"!=typeof i.align?o.addClass(t,"prism-info-left-bottom"):o.removeClass(t,"prism-info-left-bottom")):t.innerHTML=i,o.css(t,"display","block"))}),r._player.on(n.Private.Info_Hide,function(e){var t=document.querySelector("#"+r.getId());o.css(t,"display","none")})}});t.exports=s},{"../../lang/index":16,"../../lib/dom":22,"../../lib/event":23,"../../lib/ua":31,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],88:[function(e,t,i){var r=e("../component"),o=(e("../../lib/util"),r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-live-display",this.addClass(this.className)}}));t.exports=o},{"../../lib/util":33,"../component":80}],89:[function(e,t,i){var r=e("../component"),o=(e("../../lib/dom"),e("../../lib/event"),e("../../player/base/event/eventtype")),n=e("../../player/base/plugin/status"),s=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-animation")},bindEvent:function(){var t=this;this._player.on(o.Player.Play,function(){t.removeClass("prism-pause-animation"),t.addClass("prism-play-animation"),t.removeClass("play-apply-animation"),setTimeout(function(){t.addClass("play-apply-animation")})}),this._player.on(o.Player.Pause,function(){var e=t._player._status;e!=n.ended&&e!=n.error&&(t.removeClass("prism-play-animation"),t.addClass("prism-pause-animation"),t.removeClass("play-apply-animation"),setTimeout(function(){t.addClass("play-apply-animation")}))})}});t.exports=s},{"../../lib/dom":22,"../../lib/event":23,"../../player/base/event/eventtype":38,"../../player/base/plugin/status":61,"../component":80}],90:[function(e,t,i){var r=e("../component"),o=e("../../player/base/event/eventtype"),n=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-play-btn")},bindEvent:function(){var e=this;this._player.on(o.Player.Play,function(){e.addClass("playing")}),this._player.on(o.Player.Pause,function(){e.removeClass("playing")}),this.on(o.Private.Click,function(){e._player.paused()?(e._player.play(),e.addClass("playing")):(e._player.pause(),e.removeClass("playing"))})}});t.exports=n},{"../../player/base/event/eventtype":38,"../component":80}],91:[function(e,t,i){var r=e("../component"),o=e("../../lib/dom"),n=e("../../lib/event"),s=e("../../lib/ua"),a=e("../../lib/function"),l=e("../../lang/index"),u=e("../../lib/util"),c=e("../../player/base/event/eventtype"),p=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-progress",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"></div><p class="prism-progress-time"></p>',e},bindEvent:function(){var t=this;this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar");var e=document.querySelector("#"+this.id());n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)}),n.on(e,"mousemove",function(e){t._progressMove(e)}),n.on(e,"touchmove",function(e){t._progressMove(e)}),n.on(this._el,"click",function(e){t._onMouseClick(e)}),this._player.on(c.Private.HideProgress,function(e){t._hideProgress(e)}),this._player.on(c.Private.CancelHideProgress,function(e){t._cancelHideProgress(e)}),n.on(e,c.Private.MouseOver,function(e){t._onMouseOver(e)}),n.on(e,c.Private.MouseOut,function(e){t._onMouseOut(e)}),n.on(this.controlNode,c.Private.MouseLeave,function(e){t._offMouseUp()}),this.bindTimeupdate=a.bind(this,this._onTimeupdate),this._player.on(c.Player.TimeUpdate,this.bindTimeupdate),s.IS_IPAD?this.interval=setInterval(function(){t._onProgress()},500):this._player.on(c.Video.Progress,function(){t._onProgress()})},_progressMove:function(e){var t=this._getSeconds(e);this.timeNode.innerText=u.formatTime(t);var i=this._player.getDuration()?t/this._player.getDuration():0,r=1-this.timeNode.clientWidth/this.el().clientWidth;r<i&&(i=r),this.cursorNode&&o.css(this.timeNode,"left",100*i+"%")},_hideProgress:function(e){n.off(this.cursorNode,"mousedown"),n.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return"function"==typeof this._player.canSeekable&&(t=this._player.canSeekable(e)),t},_onMouseOver:function(e){if(this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),!this._mouseInProgress){this._updateCursorPosition(this._player.getCurrentTime());var t=this;setTimeout(function(){o.css(t.cursorNode,"display","block")}),o.css(this.timeNode,"display","block")}this._mouseInProgress=!0},_onMouseOut:function(e){var t=this;this._cursorHideHandler=setTimeout(function(){o.css(t.cursorNode,"display","none"),o.css(t.timeNode,"display","none"),t._mouseInProgress=!1})},_getSeconds:function(e){for(var t=this.el().offsetLeft,i=this.el();i=i.offsetParent;)t+=i.offsetLeft;var r=(e.touches?e.touches[0].pageX:e.pageX)-t,o=this.el().offsetWidth,n=this._player.getDuration()?r/o*this._player.getDuration():0;return n<0&&(n=0),n>this._player.getDuration()&&(n=this._player.getDuration()),n},_onMouseClick:function(e){var t=this._getSeconds(e);this._canSeekable(t)?(this._player.trigger(c.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._player.seek(t),this._player.trigger(c.Private.EndStart,{toTime:t}),this._updateCursorPosition(t)):this._player.trigger(c.Private.Info_Show,{text:l.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(c.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),n.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),n.on(this._player.tag,"mouseup",function(e){t._onPlayerMouseUp(e)}),n.on(this._player.tag,"touchend",function(e){t._onPlayerMouseUp(e)}),n.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),n.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)})},_onMouseUp:function(e){this._onMouseUpIntern(e)},_onControlBarMouseUp:function(e){this._onMouseUpIntern(e)},_onPlayerMouseUp:function(e){this._onMouseUpIntern(e)},_offMouseUp:function(){n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend")},_onMouseUpIntern:function(e){e.preventDefault(),this._offMouseUp();var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),isNaN(t)||this._player.seek(t),this._player.trigger(c.Private.EndStart,{toTime:t})},_onMouseMove:function(e){e.preventDefault();var t=this._getSeconds(e);this._player._hls||(this._player.seek(t),this._player.play()),this._updateProgressBar(this.playedNode,t),this._updateCursorPosition(t)},_onTimeupdate:function(e){this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(c.Private.UpdateProgressBar,{time:this._player.getCurrentTime()})},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){if(1!=this._player._switchSourcing){var i=this._player.getDuration()?t/this._player.getDuration()+.005:0;1<i&&(i=1),e&&o.css(e,"width",100*i+"%")}},_updateCursorPosition:function(e){if(1!=this._player._switchSourcing){var t=this._player.getDuration()?e/this._player.getDuration():0,i=1,r=this._player.el().clientWidth;0!=r&&(i=1-18/r),this.cursorNode&&(i<t?(o.css(this.cursorNode,"right","0px"),o.css(this.cursorNode,"left","auto")):(o.css(this.cursorNode,"right","auto"),o.css(this.cursorNode,"left",100*t+"%")))}}});t.exports=p},{"../../lang/index":16,"../../lib/dom":22,"../../lib/event":23,"../../lib/function":24,"../../lib/ua":31,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],92:[function(e,t,i){var r=e("../component"),o=e("../../lib/dom"),f=e("../../lib/util"),y=(e("../../lang/index"),e("../../player/base/event/eventtype")),n=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-snapshot-btn")},createEl:function(){return r.prototype.createEl.call(this,"div")},bindEvent:function(){var h=this;this._player.on(y.Private.Snapshot_Hide,function(){o.css(h._el,"display","none")}),this.on("click",function(){h.trigger(y.Player.Snapshoting);var e=document.createElement("canvas"),t=h._player.tag,i=t.videoWidth,r=t.videoHeight,o=h._player._getSanpshotMatric();e.width=o.width||i,e.height=o.height||r;var n=h._player.getCurrentTime(),s=e.getContext("2d");s.save();var a=h._player.getImage();"vertical"==a?(s.translate(0,e.height),s.scale(1,-1)):"horizon"==a&&(s.translate(e.width,0),s.scale(-1,1)),s.drawImage(t,0,0,i,r),s.restore(),_(s,h._player.getOptions());var l="",u="";try{l=e.toDataURL("image/jpeg",o.rate||1)}catch(e){u=e}var c="",p="",d="";l&&(p=(c=l).substr(c.indexOf(",")+1),d=f.toBinary(p)),h.trigger(y.Player.Snapshoted,{time:n,base64:c,binary:d,error:u})})}}),_=function(e,t){var i=t.snapshotWatermark;i&&i.text&&(e.font=i.font,i.fillColor&&(e.fillStyle=i.fillColor,e.fillText(i.text,i.left,i.top)),i.strokeColor&&(e.strokeStyle=i.strokeColor,e.strokeText(i.text,i.left,i.top)),e.stroke())};t.exports=n},{"../../lang/index":16,"../../lib/dom":22,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],93:[function(e,t,i){var r=e("../component"),a=e("../../lib/object"),l=e("../../lib/util"),u=(e("../../lib/cookie"),e("../../lib/dom")),c=e("../../lib/event"),p=e("../../lib/constants"),d=e("../../lang/index"),h=e("../../player/base/event/eventtype"),o=r.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._isShown=!1,r.call(this,e,t),this.className=t.className?t.className:"prism-speed-selector",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<div class="current-speed-selector" key="1">'+d.get("Speed_Text")+'</div><ul class="speed-selector-list"></ul>',e},bindEvent:function(){var n=this,o=document.querySelector("#"+n.id()+"  .current-speed-selector"),s=document.querySelector("#"+n.id()+" .speed-selector-list"),e=function(){u.css(s,"display","none"),n._isShown=!1};c.on(s,"mouseleave",function(){e()}),c.on(s,"mouseenter",function(){u.css(s,"display","block"),n._isShown=!0}),c.on(o,"mouseleave",function(){setTimeout(function(){n._isShown||u.css(s,"display","none")}),n._isShown=!1}),this._player.on(h.Private.SpeedSelectorHide,function(){e()}),c.on(o,"click",function(){if(n._hasGeneratedList)u.css(s,"display",0==n._isShown?"block":"none"),n._isShown=!n._isShown,n._isShown&&n._player.trigger(h.Private.StreamSelectorHide);else{var e=p.SpeedLevels;a.each(e,function(e,t){var i=u.createEl.call(n,"li",{key:e.key,text:e.text});o.getAttribute("key")==e.key&&(u.addClass(i,"current"),n._previousSelection=i);var r=u.createEl.call(n,"span",{key:e.key,text:e.text});r.innerText=e.text,i.appendChild(r),s.appendChild(i)}),n._hasGeneratedList=!0,u.css(s,"display","block"),n._player.trigger(h.Private.StreamSelectorHide)}}),c.on(s,"click",function(e){var t=e.srcElement?e.srcElement:e.target,i=t.key,r=t.text;if(void 0!==r){n._previousSelection&&u.removeClass(n._previousSelection,"current"),n._previousSelection=t,u.addClass(t,"current"),n._player.setSpeed(i),l.delayHide(s);var o=d.get("Speed_Switch_To")+"<span>"+r+"</span>";n._player.trigger(h.Private.Info_Show,{text:o,duration:1e3,align:"lb"})}})}});t.exports=o},{"../../lang/index":16,"../../lib/constants":19,"../../lib/cookie":20,"../../lib/dom":22,"../../lib/event":23,"../../lib/object":27,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],94:[function(e,t,i){var r=e("../component"),o=e("../../lib/object"),s=e("../../lib/util"),l=e("../../lib/cookie"),u=e("../../lib/dom"),c=e("../../lib/event"),p=e("../../lib/constants"),d=e("../../lang/index"),h=e("../../player/base/event/eventtype"),n=r.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._isShown=!1,r.call(this,e,t),this.className=t.className?t.className:"prism-stream-selector",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<div class="current-stream-selector">'+d.get("SD")+'</div><ul class="stream-selector-list"></ul>',e},showTip:function(e,t){this._player.trigger(h.Private.Info_Show,{text:e,duration:t,align:"lb"})},bindEvent:function(){var a=this,e=document.querySelector("#"+a.id()+"  .current-stream-selector"),n=document.querySelector("#"+a.id()+" .stream-selector-list"),t=function(){u.css(n,"display","none"),a._isShown=!1};c.on(n,"mouseleave",function(){t()}),this._player.on(h.Private.StreamSelectorHide,function(){t()}),c.on(n,"mouseenter",function(){u.css(n,"display","block"),a._isShown=!0}),c.on(e,"mouseleave",function(){setTimeout(function(){a._isShown||u.css(n,"display","none")}),a._isShown=!1}),this._player.on(h.Private.QualityChange,function(e){var t=document.querySelectorAll("#"+a.id()+" .stream-selector-list li"),i="",r="";if(t.length>a._player._currentPlayIndex){var o=t[a._player._currentPlayIndex];i=d.get("Quality_The_Url"),a._previousSelection&&(u.removeClass(a._previousSelection,"current"),i=a._previousSelection.text),u.addClass(o,"current"),r=o.text,document.querySelector("#"+a.id()+" .current-stream-selector").innerText=r,a._previousSelection=o}else if(0<a._player._currentPlayIndex){var n=a._player._urls,s=a._player._currentPlayIndex;i=n[s-1].desc,r=n[s].desc}a.showTip(i+e.paramData+r,1e3)}),this._player.on(h.Private.SourceLoaded,function(e){var t=e.paramData.desc,i=document.querySelector("#"+a.id()+" .current-stream-selector");i.innerText=t,u.css(i,"display","block")}),c.on(e,"click",function(){if(a._hasGeneratedList)u.css(n,"display",0==a._isShown?"block":"none"),a._isShown=!a._isShown,a._isShown&&a._player.trigger(h.Private.SpeedSelectorHide);else{var e=a._player._urls;1<e.length&&o.each(e,function(e,t){var i=u.createEl.call(a,"li",{url:e.Url,index:t,text:e.desc});a._player._currentPlayIndex==t&&(u.addClass(i,"current"),a._previousSelection=i);var r=u.createEl.call(a,"span",{url:e.Url,index:t,text:e.desc});r.innerText=e.desc,i.appendChild(r),n.appendChild(i),a._hasGeneratedList=!0,u.css(n,"display","block"),a._player.trigger(h.Private.SpeedSelectorHide)})}}),c.on(n,"click",function(e){var t=e.srcElement?e.srcElement:e.target,i=t.url,r=t.index,o=t.text;void 0!==o&&(a._player._switchSourcing=!0,a._previousSelection&&u.removeClass(a._previousSelection,"current"),a._previousSelection=t,u.addClass(t,"current"),a._player._currentPlayIndex=r,l.set(p.SelectedStreamLevel,a._player._urls[r].definition,365),a._player._urls.length>r&&(i=a._player._urls[r].Url),document.querySelector("#"+a.id()+" .current-stream-selector").innerText=o,a._player.loadByUrl(i,a._player.getCurrentTime(),!a._player.paused()),u.css(n,"display","none"),a._isShown=!1,a.showTip(d.get("Quality_Change_Text")+"<span>"+o+"</span>",2e3),setTimeout(function(){a._player._switchSourcing=!1}),s.delayHide(n))})}});t.exports=n},{"../../lang/index":16,"../../lib/constants":19,"../../lib/cookie":20,"../../lib/dom":22,"../../lib/event":23,"../../lib/object":27,"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],95:[function(e,t,i){var r=e("../component"),o=e("../../lib/util"),n=e("../../player/base/event/eventtype"),s=r.extend({init:function(e,t){r.call(this,e,t),this.className=t.className?t.className:"prism-time-display",this.addClass(this.className)},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var t=this;this._player.on(n.Video.DurationChange,function(){var e=o.formatTime(t._player.getDuration());e?(document.querySelector("#"+t.id()+" .time-bound").style.display="inline",document.querySelector("#"+t.id()+" .duration").style.display="inline",document.querySelector("#"+t.id()+" .duration").innerText=e):(document.querySelector("#"+t.id()+" .duration").style.display="none",document.querySelector("#"+t.id()+" .time-bound").style.display="none")}),this._player.on(n.Video.TimeUpdate,function(){var e=o.formatTime(t._player.getCurrentTime());document.querySelector("#"+t.id()+" .current-time")&&(e?(document.querySelector("#"+t.id()+" .current-time").style.display="inline",document.querySelector("#"+t.id()+" .current-time").innerText=e):document.querySelector("#"+t.id()+" .current-time").style.display="none")})}});t.exports=s},{"../../lib/util":33,"../../player/base/event/eventtype":38,"../component":80}],96:[function(e,t,i){var r=e("../component"),o=e("../../lib/dom"),n=e("../../lib/event"),s=e("../../player/base/event/eventtype"),a=r.extend({init:function(e,t){r.call(this,e,t),this.addClass(t.className||"prism-volume"),this._shown=!1},createEl:function(){var e=r.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-icon"></div> <div class="volume-control"><div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div><div class="volume-control-icon"></div></div>',e},bindEvent:function(){var i=this;this.icon=document.querySelector("#"+i.id()+"  .volume-icon"),this.controlicon=document.querySelector("#"+i.id()+"  .volume-control-icon"),this.control=document.querySelector("#"+i.id()+"  .volume-control"),this.volumnValue=document.querySelector("#"+i.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+i.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+i.id()+"  .volume-cursor"),n.on(this.control,"mouseenter",function(){o.css(i.control,"display","block"),i._shown=!0}),n.on(this.icon,"mouseleave",function(){setTimeout(function(){i._shown||o.css(i.control,"display","none")}),i._shown=!1}),n.on(this.icon,"click",function(){if(i._shown)o.css(i.control,"display","none"),i._shown=!1;else{var e=i._player.getVolume();i._setVolumnUI(e),o.css(i.control,"display","block"),i._shown=!0}}),n.on(this.volumnRange,"click",function(e){var t=i._getPosition(e).toFixed(2);t<0&&(t=0),1<t&&(t=1),i._setVolumnUI(t),i._setMuteUI(t),i._player.setVolume(t)}),n.on(this.controlicon,"click",function(e){i._player.muted()?i._player.unMute():i._player.mute()}),n.on(this.volumnCursor,"mousedown",function(e){i._onMouseDown(e)}),n.on(this.volumnCursor,"touchstart",function(e){i._onMouseDown(e)}),this._player.on(s.Private.VolumnChanged,function(e){var t=e.paramData;-1<t&&i._setVolumnUI(t),i._setMuteUI(t)}),n.on(this.control,"mouseleave",function(){o.css(i.control,"display","none"),i._shown=!1}),n.on(this.control,"mouseover",function(){o.addClass(i.control,"hover")}),i._rangeBottom=i._getBottom()},_getBottom:function(){if(window.getComputedStyle){var e=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom");return parseFloat(e)}return 26},_onMouseDown:function(e){var t=this;e.preventDefault(),n.on(this.control,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.control,"touchmove",function(e){t._onMouseMove(e)}),n.on(this._player.tag,"mouseup",function(e){t._onMouseUp(e)}),n.on(this._player.tag,"touchend",function(e){t._onMouseUp(e)}),n.on(this.control,"mouseup",function(e){t._onMouseUp(e)}),n.on(this.control,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),this._offEvent();var t=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2);this._player.setVolume(t),this._setMuteUI(t)},_onMouseMove:function(e){e.preventDefault();var t=this._getPosition(e);t<0&&(t=0),1<t&&(t=1),this._setVolumnUI(t)},_getPosition:function(e){for(var t=this.el(),i=0;t=t.offsetParent;)i+=t.offsetTop;return(i-(e.touches?e.touches[0].pageY:e.pageY)-this._rangeBottom)/this.volumnRange.offsetHeight},_offEvent:function(){n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.control,"mousemove"),n.off(this.control,"touchmove"),n.off(this.control,"mouseup"),n.off(this.control,"touchend")},_setMuteUI:function(e){isNaN(e)||(0==e||-1==e?(o.addClass(this.icon,"mute"),o.addClass(this.controlicon,"mute")):(o.removeClass(this.icon,"mute"),o.removeClass(this.controlicon,"mute")))},_setVolumnUI:function(e){isNaN(e)||(o.css(this.volumnValue,"height",100*e+"%"),1==e&&(e=.99),o.css(this.volumnCursor,"bottom",100*e+"%"))}});t.exports=a},{"../../lib/dom":22,"../../lib/event":23,"../../player/base/event/eventtype":38,"../component":80}],97:[function(e,t,i){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),streamButton:e("./component/stream-selector"),speedButton:e("./component/speed-selector"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay")}},{"../commonui/liveshiftprogress":8,"../commonui/livetimedisplay":9,"./component/big-play-button":81,"./component/controlbar":82,"./component/error-display":84,"./component/fullscreen-button":85,"./component/h5-loading":86,"./component/info-display":87,"./component/live-display":88,"./component/play-button":90,"./component/progress":91,"./component/snapshot":92,"./component/speed-selector":93,"./component/stream-selector":94,"./component/time-display":95,"./component/volume":96}]},{},[11]);